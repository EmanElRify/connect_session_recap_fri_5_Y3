"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2353],{26300:function(e,o,n){n.d(o,{AS:function(){return v},Ac:function(){return y},h6:function(){return m}});var r=n(34727),t=n(14251),u=n(52875),i=n(70655),l=n(49254),s=n(1215),d=n(33943),c=n(74035),a=n(3397);function v(e){var o,n=e.atom,r=e.rootId,i=e.lessonId,l=e.userResponse,s=e.feedback;if(n.id)return{nodeId:n.id,rootId:r,lessonId:i,userResponse:(0,u.Z)((0,t.Z)({},l),{isCorrect:s&&"is_correct"in s?s.is_correct:null!==(o=null===s||void 0===s?void 0:s.passed)&&void 0!==o?o:l.isCorrect})}}function f(e){var o,n=e.atom,r=e.rootId,i=e.lessonId,l=e.userResponse,s=e.feedback;if(n.id&&n.key&&n.content.evaluationId)return{nodeId:n.id,rootId:r,lessonId:i,userResponse:(0,u.Z)((0,t.Z)({},l),{isCorrect:s&&"is_correct"in s?s.is_correct:null!==(o=null===s||void 0===s?void 0:s.passed)&&void 0!==o?o:l.isCorrect}),atomKey:n.key,atomId:n.id,evaluationId:n.content.evaluationId}}function p(e){var o,n=e.atom,r=e.rootId,t=e.lessonId,u=e.userResponse,i=e.operation,l=e.clientExecution;if(n.id&&n.key&&n.content.evaluationId)return{userResponse:u,operation:i,clientExecution:l,nodeId:n.id,atomId:n.id,atomKey:n.key,rootId:r,lessonId:t,evaluationId:null===n||void 0===n||null===(o=n.content)||void 0===o?void 0:o.evaluationId}}function y(e,o){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)((function(e,o){var n,r,l,s,d,c,y,Z,k,m,g;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n=e.atom,(0,a.Xf)(n)||(0,a.nO)(n)||(0,a.q1)(n)||(0,a.Qy)(n)?(r=v(e))?[4,o(r)]:[2]:[3,2];case 1:return(l=i.sent())?(l.kind=a.bG.SimpleQuiz,[2,l]):[2,l];case 2:return(0,a.HB)(n)?(s=f((0,u.Z)((0,t.Z)({},e),{atom:n})))?[4,o(s)]:[2]:[3,4];case 3:return(d=i.sent())?(d.kind=a.bG.ImageFormQuiz,[2,d]):[2,d];case 4:return(0,a.$h)(n)?(c=p((0,u.Z)((0,t.Z)({},e),{atom:n})))?[4,o(c)]:[2]:[3,6];case 5:return(y=i.sent())?(y.kind=a.bG.ProgrammingQuiz,[2,y]):[2,y];case 6:return(0,a.OH)(n)?(Z=p((0,u.Z)((0,t.Z)({},e),{atom:n})))?[4,o(Z)]:[2]:[3,8];case 7:return(k=i.sent())?(k.kind=a.bG.CodeGradedQuiz,[2,k]):[2,k];case 8:return(0,a.Dw)(n)?(m=p((0,u.Z)((0,t.Z)({},e),{atom:n})))?[4,o(m)]:[2]:[3,10];case 9:return(g=i.sent())?(g.kind=a.bG.IFrameQuiz,[2,g]):[2,g];case 10:return[2]}}))}))).apply(this,arguments)}var k=["creator_role","viewer_role","translator_role"];function m(e,o){var n,r=c.Z.getState(),t=l.sA.endpoints.fetchUser.select()(r).data,u=null===t||void 0===t?void 0:t.authorizationPolicies.filter((function(e){return k.includes(e.roleName)})).map((function(e){return e.resourceSpec})),i=null===u||void 0===u?void 0:u.find((function(o){return(0,a.Se)(o)&&o.key===e})),v=null===(n=o.find((function(o){return o.program.key===e})))||void 0===n?void 0:n.program,f=(0,d.SJ)(),p=(0,d.Sn)();if(!f&&!p&&!!!i){if(!v)return null;if(!v.key||!v.version||!v.locale)return console.error("Cannot fetch enrollment with a missing key, version, or locale"),null}var y,Z,m,g,S,K,h=new URLSearchParams(window.location.search),C=null!==(m=null!==(Z=null!==(y=h.get(s.Jq))&&void 0!==y?y:null===v||void 0===v?void 0:v.version)&&void 0!==Z?Z:null===i||void 0===i?void 0:i.version)&&void 0!==m?m:"",E=null!==(K=null!==(S=null!==(g=h.get(s._1))&&void 0!==g?g:null===v||void 0===v?void 0:v.locale)&&void 0!==S?S:null===i||void 0===i?void 0:i.locale)&&void 0!==K?K:"";return{key:e,version:C,locale:E}}},63598:function(e,o,n){n.d(o,{r:function(){return p}});var r=n(67573),t=n(14251),u=n(52875),i=n(67294),l=n(11163),s=n(18446),d=n.n(s),c=n(9493),a=n(49254),v=n(26300),f=n(69549),p=function(){var e=(0,l.useRouter)().query,o=e.nanodegreeKey,n=e.partKey,s=e.paidCourseKey,p=e.freeCourseKey,y=e.lessonKey,Z=e.conceptKey,k=e.labKey,m=(0,f.B)(),g=m.enrollments,S=m.isFetchingEnrollments,K=(0,i.useState)({}),h=K[0],C=K[1],E=(0,i.useState)(null),I=E[0],b=E[1],j=(0,a.Q)(null!==I&&void 0!==I?I:c.skipToken),P=j.data,_=j.error,w=j.isSuccess,R=(0,a.OA)(null!==I&&void 0!==I?I:c.skipToken),B=R.data,M=R.error,F=R.isSuccess;(0,i.useEffect)((function(){w&&F&&C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===I||void 0===I?void 0:I.key,!0))}))}),[w,F,null===I||void 0===I?void 0:I.key]),(0,i.useEffect)((function(){_&&(C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===I||void 0===I?void 0:I.key,!0))})),console.error("Could not fetch nanodegree content"))}),[_,null===I||void 0===I?void 0:I.key]),(0,i.useEffect)((function(){M&&console.error("Could not fetch nanodegree user state")}),[M]);var T=(0,i.useMemo)((function(){var e;if(P&&B){var o,n,r,i,l,s,d=B.userStateByProgressKey,c=B.projectStateByProgressKey,a=B.partLocksByProgressKey;return(0,u.Z)((0,t.Z)({},P),{userState:d[null!==(o=P.progressKey)&&void 0!==o?o:""],parts:null===P||void 0===P||null===(e=P.parts)||void 0===e?void 0:e.map((function(e){return(0,u.Z)((0,t.Z)({},e),{lock:null===a||void 0===a?void 0:a[null!==(n=e.progressKey)&&void 0!==n?n:""],userState:d[null!==(r=e.progressKey)&&void 0!==r?r:""],lessons:e.lessons.map((function(e){var o,n;return(0,u.Z)((0,t.Z)({},e),{project:e.project?(0,u.Z)((0,t.Z)({},e.project),{projectState:c[null!==(i=null===(o=e.project)||void 0===o?void 0:o.progressKey)&&void 0!==i?i:""]}):void 0,userState:d[null!==(l=e.progressKey)&&void 0!==l?l:""],concepts:null===e||void 0===e||null===(n=e.concepts)||void 0===n?void 0:n.map((function(e){return(0,u.Z)((0,t.Z)({},e),{userState:d[null!==(s=e.progressKey)&&void 0!==s?s:""]})}))})}))})}))})}}),[P,B]),z=(0,i.useMemo)((function(){var e;return null===T||void 0===T||null===(e=T.parts)||void 0===e?void 0:e.find((function(e){return e.key===n}))}),[T,n]),Q=(0,i.useState)(null),q=Q[0],G=Q[1],U=(0,a.K5)(null!==q&&void 0!==q?q:c.skipToken),A=U.data,L=U.error,O=U.isSuccess,D=(0,a.OJ)(null!==q&&void 0!==q?q:c.skipToken),J=D.data,N=D.error,x=D.isSuccess;(0,i.useEffect)((function(){O&&x&&C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===q||void 0===q?void 0:q.key,!0))}))}),[O,x,null===q||void 0===q?void 0:q.key]),(0,i.useEffect)((function(){L&&(C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===q||void 0===q?void 0:q.key,!0))})),console.error("Could not fetch paidCourse content"))}),[L,null===q||void 0===q?void 0:q.key]),(0,i.useEffect)((function(){N&&(C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===q||void 0===q?void 0:q.key,!0))})),console.error("Could not fetch paidCourse user state and project state"))}),[N,null===q||void 0===q?void 0:q.key]);var H=(0,i.useMemo)((function(){if(A&&J){var e,o,n,r,i=J.userStateByProgressKey,l=J.projectStateByProgressKey;return(0,u.Z)((0,t.Z)({},A),{userState:i[null!==(e=A.progressKey)&&void 0!==e?e:""],lessons:null===A||void 0===A?void 0:A.lessons.map((function(e){var s,d;return(0,u.Z)((0,t.Z)({},e),{project:e.project?(0,u.Z)((0,t.Z)({},e.project),{projectState:l[null!==(o=null===(s=e.project)||void 0===s?void 0:s.progressKey)&&void 0!==o?o:""]}):void 0,userState:i[null!==(n=e.progressKey)&&void 0!==n?n:""],concepts:null===e||void 0===e||null===(d=e.concepts)||void 0===d?void 0:d.map((function(e){return(0,u.Z)((0,t.Z)({},e),{userState:i[null!==(r=e.progressKey)&&void 0!==r?r:""]})}))})}))})}}),[A,J]),$=(0,i.useState)(null),W=$[0],X=$[1],Y=(0,a.eU)(null!==W&&void 0!==W?W:c.skipToken),V=Y.data,ee=Y.error,oe=Y.isSuccess,ne=(0,a.UL)(null!==W&&void 0!==W?W:c.skipToken),re=ne.data,te=ne.error,ue=ne.isSuccess;(0,i.useEffect)((function(){oe&&ue&&C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===W||void 0===W?void 0:W.key,!0))}))}),[oe,ue,null===W||void 0===W?void 0:W.key]),(0,i.useEffect)((function(){ee&&(C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===W||void 0===W?void 0:W.key,!0))})),console.error("Could not fetch freeCourse content"))}),[ee,null===W||void 0===W?void 0:W.key]),(0,i.useEffect)((function(){te&&(C((function(e){return(0,u.Z)((0,t.Z)({},e),(0,r.Z)({},null===W||void 0===W?void 0:W.key,!0))})),console.error("Could not fetch freeCourse user state and project state"))}),[te,null===W||void 0===W?void 0:W.key]);var ie,le,se=(0,i.useMemo)((function(){if(V&&re){var e,o,n,r,i=re.userStateByProgressKey,l=re.projectStateByProgressKey;return(0,u.Z)((0,t.Z)({},V),{userState:i[null!==(e=V.progressKey)&&void 0!==e?e:""],lessons:null===V||void 0===V?void 0:V.lessons.map((function(e){var s,d;return(0,u.Z)((0,t.Z)({},e),{project:e.project?(0,u.Z)((0,t.Z)({},e.project),{projectState:l[null!==(o=null===(s=e.project)||void 0===s?void 0:s.progressKey)&&void 0!==o?o:""]}):void 0,userState:i[null!==(n=e.progressKey)&&void 0!==n?n:""],concepts:null===e||void 0===e||null===(d=e.concepts)||void 0===d?void 0:d.map((function(e){return(0,u.Z)((0,t.Z)({},e),{userState:i[null!==(r=e.progressKey)&&void 0!==r?r:""]})}))})}))})}}),[V,re]),de=(0,i.useMemo)((function(){var e;return null===(e=null!==(ie=null!==z&&void 0!==z?z:H)&&void 0!==ie?ie:se)||void 0===e?void 0:e.lessons.find((function(e){return e.key===y}))}),[se,y,H,z]),ce=(0,i.useMemo)((function(){var e;return null===de||void 0===de||null===(e=de.concepts)||void 0===e?void 0:e.find((function(e){return e.key===Z}))}),[de,Z]),ae=(0,i.useMemo)((function(){var e;return(null===de||void 0===de||null===(e=de.lab)||void 0===e?void 0:e.key)===k?null===de||void 0===de?void 0:de.lab:void 0}),[de,k]),ve=(0,a.D9)(null!==(le=null===ae||void 0===ae?void 0:ae.id)&&void 0!==le?le:c.skipToken),fe=ve.data,pe=ve.error;(0,i.useEffect)((function(){pe&&console.error("Could not fetch lab result for lesson")}),[pe]);var ye=(0,i.useCallback)((function(e){var o=(0,v.h6)(e,g);null===o||d()(o,I)||b(o),o||C((function(o){return(0,u.Z)((0,t.Z)({},o),(0,r.Z)({},e,!0))}))}),[g]);(0,i.useEffect)((function(){S||"string"===typeof o&&ye(o)}),[o,S]);var Ze=(0,i.useCallback)((function(e){var o=(0,v.h6)(e,g);null===o||d()(o,q)||G(o),o||C((function(o){return(0,u.Z)((0,t.Z)({},o),(0,r.Z)({},e,!0))}))}),[g]);(0,i.useEffect)((function(){S||"string"===typeof s&&Ze(s)}),[s,S]);var ke=(0,i.useCallback)((function(e){var o=(0,v.h6)(e,g);null===o||d()(o,W)||X(o),o||C((function(o){return(0,u.Z)((0,t.Z)({},o),(0,r.Z)({},e,!0))}))}),[g]);(0,i.useEffect)((function(){S||"string"===typeof p&&ke(p)}),[p,S]);var me,ge=(0,a.DR)((null===de||void 0===de?void 0:de.id)?de.id:c.skipToken),Se=ge.data,Ke=ge.error,he=ge.isFetching,Ce=ge.isUninitialized;(0,i.useEffect)((function(){Ke&&console.error("Could not fetch lesson atoms")}),[Ke]);var Ee=(0,i.useMemo)((function(){return"string"===typeof Z&&null!==(me=null===Se||void 0===Se?void 0:Se[Z])&&void 0!==me?me:[]}),[Se,Z]),Ie=o&&T||s&&H||p&&se;return{nanodegree:T,part:z,paidCourse:H,freeCourse:se,lesson:de,concept:ce,lab:ae,labResult:null===fe||void 0===fe?void 0:fe.result,atoms:Ee,isFetchLessonAtomsComplete:!he&&!Ce,atomsByConceptKey:Se,requestedContentKeys:h,isPageEventReady:Ie}}},69549:function(e,o,n){n.d(o,{B:function(){return i}});var r=n(67294),t=n(49254),u=n(10037),i=function(){var e,o=(0,t.WY)(),n=o.data,i=o.error,l=o.isFetching,s=o.refetch;(0,r.useEffect)((function(){i&&console.error("Could not fetch enrollments")}),[i]);var d=(0,r.useMemo)((function(){return null!==(e=null===n||void 0===n?void 0:n.map((function(e){return e.program.key})).filter(u.$K).filter(u.K0))&&void 0!==e?e:[]}),[n]);return{enrollments:null!==n&&void 0!==n?n:[],enrollmentProgramKeys:d,isFetchingEnrollments:l,fetchEnrollmentsError:i,selectEnrollmentForKey:function(e){return null===n||void 0===n?void 0:n.find((function(o){return o.program.key===e}))},refetchEnrollments:s}}},51423:function(e,o,n){n.d(o,{K:function(){return r}});var r=function(){var e=new URLSearchParams(window.location.search);e.delete("tab");var o=e.toString();return{queryParams:e,queryString:o}}}}]);