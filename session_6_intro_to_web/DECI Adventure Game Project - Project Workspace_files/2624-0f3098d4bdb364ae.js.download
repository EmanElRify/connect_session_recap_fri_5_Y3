"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2624],{71015:function(e,n,t){t.d(n,{M:function(){return i},O:function(){return r}});var o=t(67294),i=o.createContext(null),r=function(){var e=o.useContext(i);if(!e)throw new Error("Atom compound components cannot be rendered outside the Atom component");return e}},98405:function(e,n,t){t.d(n,{l:function(){return s}});var o=t(85893),i=(t(67294),t(11163)),r=t(82954),l=t(63598),s=function(e){var n=e.paramName,t=(0,i.useRouter)(),s=n?t.query[n]:void 0,a=(0,l.r)().requestedContentKeys;return s&&a[s]?(console.error("Attempted to access content key: ".concat(s)),t.push("/"),(0,o.jsx)(r.S,{})):(0,o.jsx)(r.S,{})}},92481:function(e,n,t){t.d(n,{_:function(){return c}});var o=t(85893),i=(t(67294),t(11163)),r=t(98405),l=t(1215),s=t(63598),a=t(51423),c=function(e){var n=e.children,t=(0,i.useRouter)(),c=(0,a.K)().queryString,u=t.query,d=u.nanodegreeKey,h=u.freeCourseKey,p=u.paidCourseKey,x=(0,s.r)(),f=x.nanodegree,v=x.freeCourse,m=x.paidCourse;if(!x.lesson){if(!f&&!v&&!m){var g=d?"nanodegreeKey":h?"freeCourseKey":p?"paidCourseKey":null;if(null!==g)return(0,o.jsx)(r.l,{paramName:g})}f?t.push(l.FO.nanodegree({nanodegree:f,queryString:c})):m?t.push(l.FO.paidCourse({paidCourse:m,queryString:c})):v&&t.push(l.FO.freeCourse({freeCourse:v,queryString:c}))}return(0,o.jsx)(o.Fragment,{children:n})}},70002:function(e,n,t){t.d(n,{Z:function(){return Ot}});var o=t(34727),i=t(80969),r=t(32692),l=t(70655),s=t(85893),a=t(67294),c=t(11163),u=t(26793),d=t(14416),h=t(70917),p=t(35796),x=t(18618),f=t(30361),v=t(93717),m=t(71293),g=t(3579),b=t(57747),j=t(32883),y=t(23855),C=t(71015),k=t(31955),w=t(8540),S=t(68920),R=t(79654);function I(e){var n=e.children,t=e.cookieName,o=(0,f.q)({defaultIsOpen:"true"!==k.Z.get(t),onClose:function(){k.Z.set(t,"true",{expires:14})}}),i=o.isOpen,r=o.onClose;return(0,s.jsx)(w.p,{in:i,unmountOnExit:!0,children:(0,s.jsxs)(S.b,{position:"fixed",alignItems:"center",bgGradient:"linear(135deg, blue.500, purple.500)",border:"none",borderRadius:"none",boxShadow:"0px 1px 2px 0px rgba(11, 11, 11, 0.06), 0px 1px 3px 0px rgba(11, 11, 11, 0.10)",color:"white",justifyContent:"center",padding:"8px",size:"sm",status:"success",zIndex:2,left:0,gap:"16px",children:[n,(0,s.jsx)(R.P,{alignSelf:"flex-start",color:"white",position:"relative",right:-1,top:-1,onClick:r})]})})}var Z=t(24435),E=t(99782),z=t(67573),T=t(14251),L=t(52875),M=t(44747),_=t(42642),P=function(e){var n=e.panelRef,t=e.handleWidthChange,o=e.maxWidth,i=e.minWidth,r=e.onResizeStart,l=e.onResizeEnd,c=(0,u.$)().i18n,d=(0,a.useState)(!1),h=d[0],p=d[1],x=(0,a.useState)(window.innerWidth),f=x[0],v=x[1],m=(0,a.useState)(0),g=m[0],j=m[1],y="rtl"===c.dir(),C=(0,a.useMemo)((function(){var e;return null!==(e=o&&O(o,f))&&void 0!==e?e:f}),[o,f]),k=(0,a.useMemo)((function(){var e;return null!==(e=i&&O(i,f))&&void 0!==e?e:0}),[i,f]),w=(0,a.useCallback)((function(e){var t,o,i,l,s,a,c=y?null===(t=n.current)||void 0===t||null===(o=t.getBoundingClientRect)||void 0===o||null===(i=o.call(t))||void 0===i?void 0:i.right:null===(l=n.current)||void 0===l||null===(s=l.getBoundingClientRect)||void 0===s||null===(a=s.call(l))||void 0===a?void 0:a.left;c&&j(c-e.clientX),p(!0),null===r||void 0===r||r()}),[r,n,y]),S=(0,a.useCallback)((function(){j(0),p(!1),null===l||void 0===l||l()}),[l]),R=(0,a.useCallback)((function(e){if(h&&n.current){var o,i,r,l,s,a,c=y?(null===(o=n.current)||void 0===o||null===(i=o.getBoundingClientRect)||void 0===i||null===(r=i.call(o))||void 0===r?void 0:r.left)+(e.clientX+g):(null===(l=n.current)||void 0===l||null===(s=l.getBoundingClientRect)||void 0===s||null===(a=s.call(l))||void 0===a?void 0:a.right)-(e.clientX+g);if(c<k)return;if(c>C)return;null===t||void 0===t||t("".concat(c,"px"))}}),[h,n,t,C,k,g,y]);return(0,a.useEffect)((function(){return h?(document.addEventListener("pointermove",R),document.addEventListener("pointerup",S)):(document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",S)),function(){document.removeEventListener("pointermove",R),document.removeEventListener("pointerup",S)}}),[h,R,S]),(0,a.useEffect)((function(){var e=function(){return v(window.innerWidth)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),(0,a.useEffect)((function(){"string"===typeof o&&n.current&&n.current.clientWidth>=C?null===t||void 0===t||t(o):"string"===typeof i&&n.current&&n.current.clientWidth<=k&&(null===t||void 0===t||t(i))}),[o,i,t,n,C,k]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.xu,{cursor:"col-resize",width:"6px",overflow:"hidden",position:"absolute",top:0,left:y?"unset":0,right:y?0:"unset",height:"100%",onPointerDown:w,zIndex:2,bg:"gray.100",children:(0,s.jsx)(_.Huf,{width:"24px",height:"24px",position:"absolute",color:"gray.400",left:"50%",top:"50%",transform:"translate(-50%, -50%)"})}),h&&(0,s.jsx)(b.xu,{zIndex:1,position:"fixed",left:"0",top:"0",height:"100vh",width:"100vw"})]})};function O(e,n){return e&&e.endsWith("px")?parseFloat(e):e&&e.endsWith("%")?function(e,n){return parseFloat(e)/100*n}(e,n):void 0}var B=(0,a.memo)(P),D=function(e){var n=e.xPosition,t=e.isOpen,o=e.width,i=e.maxWidth,r=e.minWidth,l=e.children,c=e.onPanelResize,u=e.isResizable,d=e.onResizeStart,h=e.onResizeEnd,p=(0,M.Z)(e,["xPosition","isOpen","width","maxWidth","minWidth","children","onPanelResize","isResizable","onResizeStart","onResizeEnd"]),x=(0,a.useRef)(null),f=(0,z.Z)({},"start"===n?"insetStart":"insetEnd",t?0:"-".concat(o));return(0,s.jsxs)(b.xu,(0,L.Z)((0,T.Z)({},p,f),{position:"fixed",w:o,maxW:i,minW:t?r:"unset",top:16,bottom:0,transitionTimingFunction:"ease-in",transitionDuration:"normal",transitionProperty:"left, right",zIndex:10,ref:x,children:[l,u&&o&&(0,s.jsx)(B,{panelRef:x,handleWidthChange:c,maxWidth:i,minWidth:r,onResizeStart:d,onResizeEnd:h})]}))},A=t(69779),H=t(59251),q=t(14769),F=t(22757),W=t(73804),K=t(33459),N=t(67288),$=t(21190),V=t(83361),Q=t(34292),X=t(81136),G=t(32556),J=t(91066);function U(e){var n=e.text,t=(0,u.$)().t,o=(0,a.useState)(!1),i=o[0],r=o[1];return(0,s.jsx)(G.u,{label:t("chat.copy.tooltip"),placement:"top",children:(0,s.jsx)(J.h,{"aria-label":t("chat.copy.label"),icon:i?(0,s.jsx)(_.nQG,{w:6,h:6}):(0,s.jsx)(_.TIy,{w:6,h:6}),isRound:!0,size:"md",variant:"ghost",color:"gray.700",_hover:{background:"blue.700",color:"white"},onClick:function(){try{navigator.clipboard.writeText(n).then((function(){r(!0),setTimeout((function(){return r(!1)}),2e3)}))}catch(e){console.error(e)}}})})}var Y=function(e){var n=e.children,t=(0,M.Z)(e,["children"]);return(0,s.jsx)(b.xu,(0,L.Z)((0,T.Z)({paddingX:"16px",width:"100%",alignItems:"center"},t),{children:n}))};function ee(){var e=(0,r.Z)(["\n  to {\n    background-position: -200%;\n  }\n"]);return ee=function(){return e},e}var ne=(0,h.F4)(ee()),te="".concat(ne," 2s linear infinite"),oe=function(){var e=(0,u.$)().t;return(0,s.jsx)(b.xu,{children:(0,s.jsx)(m.x,{color:"gray.500",sx:{display:"inline-block",background:"linear-gradient(to right, #989898 40%, black 50%, #989898 60%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundSize:"200% auto",animation:te},children:e("chat.thinking")})})},ie=function(e){var n=e.onRegenerate,t=(0,u.$)().t;return(0,s.jsx)(G.u,{label:t("chat.regenerate"),placement:"top",children:(0,s.jsx)(J.h,{"aria-label":t("chat.regenerate"),icon:(0,s.jsx)(_.DuK,{}),isRound:!0,size:"md",variant:"ghost",color:"gray.700",_hover:{background:"blue.700",color:"white"},onClick:n})})},re=t(58013),le=function(e){var n=e.active,t=e.variant,o=e.onClick,i=e.onTextSubmit,r=(0,u.$)().t,l=(0,f.q)(),a=l.isOpen,c=l.onOpen,d=l.onClose,h="upvote"===t,p="gray.700",x=void 0,v=r(h?"chat.voteLabelPositive":"chat.voteLabelNegative");n&&(p="white",x=h?"feedback.positive":"feedback.negative",v=r(h?"chat.voteLabelPositiveSelected":"chat.voteLabelNegativeSelected"));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.h,{"aria-label":v,icon:h?(0,s.jsx)(_.Z7j,{w:6,h:6}):(0,s.jsx)(_.C_W,{transform:"rotateY(180deg)",w:6,h:6}),isRound:!0,size:"md",variant:"ghost",background:x,color:p,_hover:{background:"blue.700",color:"white"},onClick:function(){o(),n||c()}}),(0,s.jsx)(re.u,{isOpen:a,onClose:d,title:r("chat.feedbackModalTitle"),children:(0,s.jsx)(xe,{variant:h?"positive":"negative",onCancel:d,onSubmit:function(e){i(e),d()}})})]})},se=function(e){var n=e.chatId,t=e.children,o=e.isLoading,r=e.rawAnswer,l=e.onRegenerate,c=(0,M.Z)(e,["chatId","children","isLoading","rawAnswer","onRegenerate"]),u=(0,a.useState)(null),d=u[0],h=u[1],p=(0,i.Z)((0,N.ot)(),1)[0],x=function(e){return{onTextSubmit:function(t){n&&p({chatId:n,vote:e,comment:t})},onClick:function(){n&&h(d===e?0:e),n&&p(d===e?{chatId:n,vote:0}:{chatId:n,vote:e,comment:""})}}};return(0,s.jsxs)(b.xu,{paddingX:"20px",children:[(0,s.jsx)(ae,(0,L.Z)((0,T.Z)({isLoading:o},c),{children:t})),!!n&&(0,s.jsxs)(Q.U,{spacing:0,justifyContent:"flex-end",children:[(0,s.jsx)(ie,{onRegenerate:l}),r&&(0,s.jsx)(U,{text:r}),(0,s.jsx)(le,(0,T.Z)({active:1===d,variant:"upvote"},x(1))),(0,s.jsx)(le,(0,T.Z)({active:-1===d,variant:"downvote"},x(-1)))]})]})};function ae(e){var n=e.isLoading,t=e.children,o=(0,M.Z)(e,["isLoading","children"]);return(0,s.jsxs)(v.k,{children:[(0,s.jsxs)(v.k,{flexShrink:0,align:"center",justify:"center",h:"24px",w:"24px",borderRadius:"50%",position:"relative",children:[(0,s.jsx)(_.fX6,{color:"blue.500",w:4,h:4,zIndex:1,position:"relative"}),(0,s.jsx)(b.xu,{color:"transparent",position:"absolute",top:"-2px",left:"-2px",height:"calc(100% + 4px)",width:"calc(100% + 4px)",children:(0,s.jsx)(X.$,{thickness:"1px",speed:n?"1s":"0s",height:"100%",width:"100%",maxHeight:"100%",maxWidth:"100%",borderColor:"gray.300",emptyColor:"gray.300",backgroundColor:"gray.100",sx:n?{borderLeftColor:"blue.500",borderRightColor:"blue.500",borderTopColor:"blue.500"}:{}})})]}),(0,s.jsxs)(Y,(0,L.Z)((0,T.Z)({me:0,my:0},o),{overflowX:"hidden",children:[(0,s.jsx)($.M,{initial:!1,children:n&&(0,s.jsx)(V.E.div,{initial:{height:"0px"},animate:{height:"auto"},exit:{height:"0px"},style:{overflow:"hidden"},children:(0,s.jsx)(oe,{})})}),t]}))]})}var ce=t(87536),ue=t(48783),de=t(85970),he=t(5418),pe=t(73062),xe=function(e){var n=e.onCancel,t=e.onSubmit,o=e.variant,i=(0,u.$)().t,r=(0,ce.cI)(),l=r.handleSubmit,a=r.register;return(0,s.jsx)("form",{onSubmit:l((function(e){return t(e.feedback)})),style:{height:"100%"},children:(0,s.jsxs)(ue.g,{w:"full",spacing:4,align:"start",h:["full","17.25rem"],children:[(0,s.jsxs)(de.NI,{flexGrow:1,display:"flex",flexDir:"column",children:[(0,s.jsx)(he.l,{mb:"0.5rem",children:i("positive"===o?"chat.feedbackSpecificTextPositive":"chat.feedbackSpecificTextNegative")}),(0,s.jsx)(pe.g,(0,T.Z)({flexGrow:1},a("feedback")))]}),(0,s.jsxs)(Q.U,{spacing:"1.5rem",borderTop:"2px solid var(--chakra-colors-gray-200)",pt:"1.5rem",w:"full",children:[(0,s.jsx)(g.z,{variant:"solid",type:"submit",children:i("common.submit")}),(0,s.jsx)(g.z,{variant:"ghost",onClick:n,children:i("common.cancel")})]})]})})},fe=t(95040),ve=t(43012),me=function(e){var n,t=e.current,o=e.previous,i=(0,u.$)(),r=i.t,l=i.i18n,a=function(e,n){return!n||(0,ve.Z)(e,n)>5?(0,ve.Z)(new Date,e)<=5?"now":e:null}(t,o);if(null===a)return null;var c="now"===a?r("common.now"):a.toLocaleString(null!==(n=null===l||void 0===l?void 0:l.language)&&void 0!==n?n:"en",{month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return(0,s.jsx)(m.x,{align:"center",fontSize:"xs",my:"1rem",children:c})},ge=t(84513),be=t(4960),je=t(12064);function ye(e){var n=e.text,t=(0,a.useState)(""),o=t[0],i=t[1],r=(0,be.c)(0);return(0,a.useEffect)((function(){return(0,je.j)(r,n.length,{type:"tween",delay:.5,duration:Math.round(n.length/75),ease:"easeInOut",onUpdate:function(e){var t=Math.ceil(e);i(n.slice(0,t))}}).stop}),[r,n]),(0,s.jsx)(V.E.span,{style:{display:"inline-block",overflow:"hidden"},children:(0,s.jsx)(K.SimpleMarkdown,{markdownText:o})})}var Ce=function(){var e=(0,u.$)().t,n=(0,ge.a)().user,t=(0,a.useState)(!0),o=t[0],i=t[1],r="".concat(e("chat.welcomeText.0",{name:null===n||void 0===n?void 0:n.firstName}),"\n        \n").concat(e("chat.welcomeText.1"),"\n        \n").concat(e("chat.welcomeText.2"),"\n        "),l="".concat(e("chat.welcomeTqText.0",{name:null===n||void 0===n?void 0:n.firstName}),"\n        \n").concat(e("chat.welcomeTqText.1"),"\n        \n").concat(e("chat.welcomeTqText.2"),"\n        ");return(0,a.useEffect)((function(){setTimeout((function(){i(!1)}),1e3)}),[]),(0,s.jsx)(ae,{isLoading:o,children:!o&&(0,s.jsx)(ye,{text:"3c65b3a6-3bc0-4a49-b63e-22b623d4e654"===(null===n||void 0===n?void 0:n.id)?l:r})})},ke=t(35614),we=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,t=(0,a.useState)(e),o=t[0],i=t[1];return(0,a.useEffect)((function(){if(!e){var t=setTimeout((function(){i(!1)}),n);return function(){clearTimeout(t)}}i(!0)}),[e,n]),o},Se=t(9493),Re=t(63598),Ie=t(79284),Ze=t(3397),Ee=t(11420),ze=["jupyter","jupyter-notebook"],Te="chat-survey-snooze",Le=t(75815),Me=t(18352),_e=t(1375),Pe=t(33943),Oe=function(){function e(n,t,i,r,s){var a=this;(0,Le.Z)(this,e),this.setChatMessages=n,this.setSessionId=t,this.onSessionChange=i,this.context=r,this.sessionId=s,this.updateMostRecent=function(e){a.setChatMessages((function(n){return function(e,n){var t=(0,A.Z)(e),o=t.pop();return o&&t.push((0,T.Z)({},o,n)),t}(n,e)}))};var c=this;this.sendMessage=function(){var e=(0,o.Z)((function(e,n,t){var i,r,s;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:(null===t||void 0===t||null===(i=t.workspace)||void 0===i?void 0:i.helpRequested)&&(c.sessionId=void 0,c.setSessionId(void 0)),r={question:e,answer:null,answerComplete:!1,answerErrored:!1,chatId:null,timestamp:new Date},c.setChatMessages((function(e){return(0,A.Z)(e).concat([r])})),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(0,_e.L)("".concat(N.wj,"/chats"),{openWhenHidden:!0,headers:c.headers,method:"POST",signal:n,body:JSON.stringify({context:(0,T.Z)({},c.context,t),userMessage:e,sessionID:c.sessionId}),onopen:function(){var e=(0,o.Z)((function(e){return(0,l.__generator)(this,(function(n){return e.ok?(c.updateMostRecent({answerComplete:!1}),[2]):(c.updateMostRecent({answerErrored:!0,answerComplete:!0}),[2])}))}));return function(n){return e.apply(this,arguments)}}(),onerror:function(e){(null===n||void 0===n?void 0:n.aborted)?c.updateMostRecent({answerComplete:!0}):(console.error(e),c.updateMostRecent({answerErrored:!0,answerComplete:!0}))},onmessage:function(e){var n;if("[DONE]"!==(null===e||void 0===e?void 0:e.data)){var t,o,i;try{if("object"===typeof(t=""===(null===e||void 0===e?void 0:e.data)?{}:JSON.parse(null===e||void 0===e?void 0:e.data))&&(null===t||void 0===t?void 0:t.error))throw new Error(null===t||void 0===t?void 0:t.error)}catch(r){return console.error(r),void c.updateMostRecent({answerErrored:!0,answerComplete:!0})}if((null===t||void 0===t||null===(n=t.session)||void 0===n?void 0:n.id)&&t.session.id!==c.sessionId)c.setSessionId(null===t||void 0===t||null===(o=t.session)||void 0===o?void 0:o.id),c.onSessionChange(null===t||void 0===t||null===(i=t.session)||void 0===i?void 0:i.id);c.setChatMessages((function(e){var n,o,i,r,l=(0,A.Z)(e),s=l.pop(),a=null!==(n=null===t||void 0===t?void 0:t.chatId)&&void 0!==n?n:null,c=(null!==(o=null===t||void 0===t?void 0:t.choices)&&void 0!==o?o:[]).map((function(e){var n;return null!==(i=null===e||void 0===e||null===(n=e.delta)||void 0===n?void 0:n.content)&&void 0!==i?i:""})).join("");s&&(s.answer="".concat(null!==(r=s.answer)&&void 0!==r?r:"").concat(c),s.chatId=a,l.push(s));return l}))}else c.updateMostRecent({answerComplete:!0})}})];case 2:return a.sent(),[3,4];case 3:return s=a.sent(),(null===n||void 0===n?void 0:n.aborted)?(c.updateMostRecent({answerComplete:!0}),[2]):(console.error(s),c.updateMostRecent({answerErrored:!0,answerComplete:!0}),[3,4]);case 4:return[2]}}))}));return function(n,t,o){return e.apply(this,arguments)}}()}return(0,Me.Z)(e,[{key:"headers",get:function(){var e=(0,Pe.v_)();return{authorization:"Bearer ".concat(e),Accept:"application/json","Content-Type":"application/json"}}}]),e}(),Be=(0,a.forwardRef)((function(e,n){var t=e.isAutoScrolling,o=e.welcomeMessage,i=e.children,r=(0,a.useState)(!1),l=r[0],c=r[1],u=(0,a.useState)(null),d=u[0],h=u[1],p=(0,a.useState)(!1),x=p[0],f=p[1],v=(0,a.useState)(!1),m=v[0],g=v[1],j=(0,a.useRef)(null),y=(0,a.useRef)(null),C=(0,a.useRef)(null);(0,a.useImperativeHandle)(n,(function(){return(0,L.Z)((0,T.Z)({},j.current),{scrollToBottom:Z})}),[]);var k=(0,a.useCallback)((function(e){var n=new MutationObserver((function(n){var t=!0,o=!1,i=void 0;try{for(var r,l=n[Symbol.iterator]();!(t=(r=l.next()).done);t=!0){if("childList"===r.value.type)if(e.children.length>0){var s=e.children[e.children.length-1];s&&(c(!0),h(s),s.scrollIntoView())}else c(!1),h(null)}}catch(a){o=!0,i=a}finally{try{t||null==l.return||l.return()}finally{if(o)throw i}}}));e&&n.observe(e,{childList:!0})}),[]);(0,a.useEffect)((function(){if(t&&l&&d){var e=j.current;setTimeout((function(){e&&(y.current=setInterval((function(){var n=e.getBoundingClientRect().top,t=d.getBoundingClientRect().top,o=n+20,i=Math.floor(t-o);if(i>0){var r=Math.min(i,20);e.scrollTo({top:e.scrollTop+r})}else w(),e.scrollHeight-e.clientHeight>0&&f(!0)}),16))}),0)}else c(!1);return w}),[t,l,d]),(0,a.useEffect)((function(){return t&&m?C.current=setInterval((function(){var e;null===(e=j.current)||void 0===e||e.scrollTo({top:j.current.scrollHeight})}),16):(g(!1),S()),S}),[t,m]),(0,a.useEffect)((function(){i&&0===a.Children.count(i)&&f(!1)}),[i]);var w=(0,a.useCallback)((function(){y.current&&(clearInterval(y.current),y.current=null)}),[]),S=(0,a.useCallback)((function(){C.current&&(clearInterval(C.current),C.current=null)}),[]),R=(0,a.useCallback)((function(){if(!y.current&&!C.current){var e=j.current;if(e){var n=e.scrollHeight-e.clientHeight>50,t=e.scrollHeight-e.scrollTop-e.clientHeight,o=Boolean(i&&a.Children.count(i)>0);f(n&&t>60&&o)}}}),[i]),I=(0,a.useCallback)((function(){R()}),[R]),Z=(0,a.useCallback)((function(){var e;w(),null===(e=j.current)||void 0===e||e.scrollTo({top:j.current.scrollHeight,behavior:"smooth"}),t&&g(!0)}),[t]),E=(0,a.useCallback)((function(){w(),S(),g(!1)}),[w,S]);return(0,s.jsxs)(b.xu,{maxH:"full",height:"100%",overflowY:"auto",onScroll:I,onWheel:E,ref:j,id:"chat-scroll-container",children:[o,(0,s.jsx)(b.xu,{ref:k,children:i}),(0,s.jsx)($.M,{children:x&&!m&&(0,s.jsx)(b.xu,{position:"absolute",bottom:"5px",left:"0",right:"0",display:"flex",justifyContent:"center",alignItems:"center",zIndex:10,children:(0,s.jsx)(V.E.div,{initial:{height:"0px"},animate:{height:"auto"},exit:{height:"0px"},style:{overflow:"hidden"},transition:{type:"tween",duration:.2,ease:"easeInOut"},children:(0,s.jsx)(J.h,{"aria-label":"Scroll to bottom",icon:(0,s.jsx)(_.v4q,{boxSize:6,color:"black"}),onClick:Z,rounded:"full",bg:"white",size:"sm",width:"35px",height:"35px",border:"1px solid",borderColor:"gray.300",_hover:{bg:"gray.50"},boxShadow:"md"})})})})]})}));Be.displayName="AutoScrollContainerWithRef";var De=(0,a.memo)(Be),Ae=t(66712),He=t(91170),qe=t(4040),Fe=t(80972),We=t(49289),Ke=function(e){var n=e.title,t=e.onClose,o=e.onViewHistory,i=e.onNewChat,r=e.onBack,l=e.onShowSurvey,a=e.onClearChat,c=e.showBackButton,d=void 0!==c&&c,h=(0,u.$)().t;return(0,s.jsx)(v.k,{py:"0.5rem",align:"center",w:"full",zIndex:"sticky",children:(0,s.jsx)(b.xu,{w:"full",px:"1rem",children:(0,s.jsxs)(v.k,{gap:2,w:"full",justify:"space-between",fontWeight:"normal",alignItems:"center",children:[(0,s.jsxs)(v.k,{align:"center",rowGap:"36px",columnGap:"8px",children:[d&&(0,s.jsx)(G.u,{label:h("chat.header.back"),children:(0,s.jsx)(J.h,{size:"sm","aria-label":h("chat.header.back"),variant:"ghost",colorScheme:"gray",onClick:r,icon:(0,s.jsx)(_.wyc,{color:"black",w:6,h:6}),ps:0,pe:0})}),(0,s.jsx)(F.X,{id:"chat-heading",size:"h3",children:n||h("chat.header.title")})]}),(0,s.jsxs)(v.k,{gap:1,justifyContent:"flex-end",alignItems:"center",children:[(0,s.jsxs)(Ae.v,{children:[(0,s.jsx)(He.j,{as:J.h,size:"sm",variant:"ghost",colorScheme:"gray","aria-label":h("chat.header.moreOptionsLabel"),icon:(0,s.jsx)(_.Huf,{w:"25px",h:"25px"}),ps:0,pe:0}),(0,s.jsxs)(qe.q,{children:[(0,s.jsx)(Fe.s,{icon:(0,s.jsx)(_.dtP,{color:"black",w:"28px",h:"28px"}),onClick:i,"aria-label":h("chat.newChat"),children:h("chat.newChat")}),(0,s.jsx)(Fe.s,{icon:(0,s.jsx)(_.KNL,{color:"black",w:"28px",h:"28px",mt:.5}),onClick:o,"aria-label":h("chat.chatHistory"),children:h("chat.chatHistory")}),(0,s.jsx)(Fe.s,{icon:(0,s.jsx)(Ne,{}),onClick:l,"aria-label":h("chat.header.surveyButton"),children:h("chat.header.surveyButton")}),(0,s.jsx)(Fe.s,{icon:(0,s.jsx)(_.XHJ,{w:"25px",h:"25px",color:"feedback.negative"}),onClick:a,"aria-label":h("chat.header.clearChatLabel"),color:"feedback.negative",children:h("chat.header.clearChatLabel")})]})]}),(0,s.jsx)(b.xu,{h:8,flexBasis:"min-content",paddingY:"6px",children:(0,s.jsx)(We.i,{orientation:"vertical"})}),(0,s.jsx)(J.h,{size:"sm","aria-label":h("chat.closeChatLabel"),variant:"ghost",colorScheme:"gray",onClick:t,icon:(0,s.jsx)(_.Two,{color:"black",w:6,h:6}),ps:0,pe:0})]})]})})})},Ne=function(){return(0,s.jsx)("svg",{className:"chakra-icon",width:"28",height:"28",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsxs)("g",{id:"Marvin Feedback",children:[(0,s.jsx)("g",{id:"Group 552",children:(0,s.jsx)("path",{id:"Union",d:"M19.9498 23.0893L20.3892 23.9875L19.9498 23.0893ZM20.8708 23.0682L21.2947 22.1625L20.8708 23.0682ZM24.3821 24.7117L23.9582 25.6174L24.3821 24.7117ZM25.7117 23.3821L24.806 23.806L25.7117 23.3821ZM24.0893 18.9498L23.191 18.5103L24.0893 18.9498ZM24.0682 19.8708L23.1625 20.2947L24.0682 19.8708ZM24 15C24 16.2613 23.7088 17.4517 23.191 18.5103L24.9875 19.3892C25.6363 18.063 26 16.5725 26 15H24ZM16 7C20.4183 7 24 10.5817 24 15H26C26 9.47715 21.5228 5 16 5V7ZM8 15C8 10.5817 11.5817 7 16 7V5C10.4772 5 6 9.47715 6 15H8ZM16 23C11.5817 23 8 19.4183 8 15H6C6 20.5228 10.4772 25 16 25V23ZM19.5103 22.191C18.4517 22.7088 17.2613 23 16 23V25C17.5725 25 19.063 24.6363 20.3892 23.9875L19.5103 22.191ZM24.806 23.806L21.2947 22.1625L20.4469 23.9739L23.9582 25.6174L24.806 23.806ZM23.1625 20.2947L24.806 23.806L26.6174 22.9582L24.9739 19.4469L23.1625 20.2947ZM20.3892 23.9875C20.4103 23.9772 20.4281 23.9741 20.4389 23.9738C20.4486 23.9735 20.4501 23.9754 20.4469 23.9739L21.2947 22.1625C20.701 21.8845 20.0438 21.93 19.5103 22.191L20.3892 23.9875ZM23.9582 25.6174C25.6519 26.4102 27.4102 24.6519 26.6174 22.9582L24.806 23.806L24.806 23.806L23.9582 25.6174ZM23.191 18.5103C22.93 19.0438 22.8845 19.701 23.1625 20.2947L24.9739 19.4469C24.9754 19.4501 24.9735 19.4486 24.9738 19.4389C24.9741 19.4281 24.9772 19.4103 24.9875 19.3892L23.191 18.5103Z",fill:"#0B0B0B"})}),(0,s.jsx)("path",{id:"Union_2",d:"M14.1133 12C12.9462 12 12 12.9484 12 14.1183C12 14.4885 12.0947 14.8365 12.2612 15.1393C12.3884 15.3707 12.6732 15.6684 12.8592 15.8557C13.5092 16.5104 14.9568 17.9603 15.6424 18.647C15.8376 18.8425 16.1524 18.8427 16.348 18.6475C17.0357 17.9611 18.4891 16.5104 19.1408 15.8556C19.327 15.6685 19.6116 15.3707 19.7387 15.1394C19.9053 14.8366 20 14.4885 20 14.1183C20 12.9484 19.0538 12 17.8867 12C17.2483 12 16.789 12.2888 16.361 12.6702C16.1553 12.8535 15.8449 12.853 15.6341 12.6756C15.2006 12.3106 14.6757 12 14.1133 12Z",stroke:"#0B0B0B","stroke-width":"1"})]})})},$e=function(e){var n=e.sessions,t=void 0===n?[]:n,o=e.onSelectSession,r=e.selectedSessionId,l=e.onDeleteCurrentSession,c=e.onBack,d=(0,u.$)().t,h=(0,Ie.Z)(!0),p=(0,i.Z)((0,N._P)(),1)[0],x=(0,N.F7)("fetchChat"),f=!r||0===t.length,g=[{id:"current",name:d("chat.newChat"),createdAt:(new Date).toISOString(),programKey:"",userId:""}].concat((0,A.Z)(t)),j=f?g:t;(0,a.useEffect)((function(){t.length>0&&t.forEach((function(e){x({sessionId:e.id,offset:0,limit:5})}))}),[t,null===h||void 0===h?void 0:h.key,x]);var y=(0,a.useCallback)((function(e){var n=t.filter((function(n){return n.id!==e}));(null===h||void 0===h?void 0:h.key)&&p({sessionId:e,programKey:h.key,sessions:n}),(0,Z.j)("Delete Chat Session Clicked",{type:"click"})}),[p,null===h||void 0===h?void 0:h.key,t]),C=(0,a.useCallback)((function(e){"current"===e.id?null===c||void 0===c||c():null===o||void 0===o||o(e.id),(0,Z.j)("Select Chat Session Clicked",{type:"click"})}),[o,c]);return(0,s.jsx)(b.xu,{children:j.map((function(e){var n=e.id===r||"current"===e.id;return(0,s.jsxs)(v.k,{p:4,alignItems:"center",justifyContent:"space-between",borderBottom:"1px",borderColor:"gray.100",_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return C(e)},bg:n?"gray.50":"white",role:"button","aria-current":n,children:[(0,s.jsx)(m.x,{noOfLines:1,flex:1,color:"gray.700",fontWeight:n?"medium":"normal",children:e.name}),(0,s.jsxs)(Ae.v,{children:[(0,s.jsx)(He.j,{as:J.h,size:"sm",variant:"ghost",colorScheme:"gray",icon:(0,s.jsx)(_.Huf,{w:5,h:5}),"aria-label":d("chat.options"),onClick:function(e){return e.stopPropagation()},_hover:{bg:"gray.100"}}),(0,s.jsx)(qe.q,{children:(0,s.jsx)(Fe.s,{icon:(0,s.jsx)(_.XHJ,{w:5,h:5}),onClick:function(t){t.stopPropagation(),n?l():y(e.id)},fontSize:"sm",color:"red.500",iconSpacing:"0.25rem",padding:"0.25rem 0.5rem",children:d("chat.deleteChat")})})]})]},e.id)}))})},Ve=t(74960),Qe=t(43798),Xe=function(e){var n=e.onDismiss,t=e.onRespond,o=(0,ge.a)().user,r=(0,i.Z)((0,N.W)(),1)[0],l=(0,u.$)().t,c=(0,a.useState)(null),d=c[0],h=c[1],p=(0,a.useState)(""),x=p[0],f=p[1],j=(0,a.useState)(!1),y=j[0],C=j[1],k=(0,a.useMemo)((function(){return["#2015FF","#B17CEF","#BDEA09","#02A083","#02A083"]}),[]),w=(0,a.useCallback)((function(){return null!==d&&d>=1&&d<=5?k[d-1]:"#2015FF"}),[k,d]);return y?(0,s.jsx)(Ge,{onRespond:t}):(0,s.jsxs)(b.xu,{px:"16px",position:"relative",zIndex:10,children:[(0,s.jsx)(F.X,{size:"h2",mb:2,children:l("chat.survey.heading")}),(0,s.jsx)(m.x,{mb:4,children:l("chat.survey.ratingText")}),(0,s.jsx)(v.k,{mb:4,children:[1,2,3,4,5].map((function(e){var n=null!==d&&d>=e;return(0,s.jsx)(J.h,{"aria-label":"star ".concat(e),variant:"ghost",onClick:function(){return h(e)},icon:n?(0,s.jsx)(Qe.M,{initialScale:3,in:!0,children:(0,s.jsx)(_.VGR,{w:8,h:8,role:"img","aria-label":"star full",transition:"all 1s",color:w()})}):(0,s.jsx)(_.WBf,{color:"black",w:8,h:8,role:"img","aria-label":"star empty"}),height:8,_hover:{bg:"transparent",boxShadow:"none"},_active:{bg:"transparent",boxShadow:"none"},_focus:{bg:"transparent",boxShadow:"none"}},e)}))}),null!==d&&(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(m.x,{size:"label",mb:2,children:l("chat.survey.feedbackText")}),(0,s.jsx)(pe.g,{value:x,onChange:function(e){return f(e.target.value)},placeholder:l("chat.survey.feedbackPlaceholder"),mb:4,maxHeight:"200px"})]}),(0,s.jsxs)(v.k,{justify:"space-between",children:[(0,s.jsx)(g.z,{isDisabled:null===d,colorScheme:"blue",onClick:function(){d&&o&&(r({userId:o.id,rating:d,comment:x}),C(!0))},children:l("chat.survey.submitButton")}),(0,s.jsx)(g.z,{variant:"ghost",onClick:n,children:l("chat.survey.dismissButton")})]})]})},Ge=function(e){var n=e.onRespond,t=(0,u.$)().t;return(0,s.jsxs)(b.xu,{px:"16px",children:[(0,s.jsx)(Ve.Z,{mode:"fall",particleCount:50,colors:["#2015FF","#171A53","#BDEA09","#02A083","#B17CEF"]}),(0,s.jsx)(F.X,{size:"h3",mb:4,children:t("chat.survey.thankYouHeading")}),(0,s.jsx)(m.x,{children:t("chat.survey.thankYouText")}),(0,s.jsx)(g.z,{mt:4,onClick:n,variant:"ghost",float:"right",children:t("chat.survey.dismissButton")})]})},Je=t(8635),Ue=t(16093),Ye=t(16554),en=t(48940),nn=function(e){var n=e.text,t=e.onRemove;return(0,s.jsx)(b.xu,{bg:"gray.50",p:4,w:"100%",children:(0,s.jsxs)(v.k,{justify:"space-between",align:"center",children:[(0,s.jsx)(m.x,{fontSize:"sm",noOfLines:3,borderLeft:"3px solid",borderColor:"blue.500",pl:4,children:n}),(0,s.jsx)(J.h,{"aria-label":"Remove quote",icon:(0,s.jsx)(_.Two,{boxSize:8,color:"gray.500"}),size:"md",variant:"unstyled",onClick:t,_hover:{"& svg":{color:"black"}}})]})})},tn=(0,Ye.G)((function(e,n){var t,o,i,r,l,c,u=e.leftIconElement,d=e.rightIconElement,h=e.containerProps,p=e.quotedText,x=e.onRemoveQuote,f=(0,M.Z)(e,["leftIconElement","rightIconElement","containerProps","quotedText","onRemoveQuote"]),m=(0,en.F)(),g=(0,a.useState)(!1),j=g[0],y=g[1],C=null===(t=m.components)||void 0===t||null===(o=t.Textarea)||void 0===o||null===(i=o.variants)||void 0===i||null===(c=i.outline)||void 0===c?void 0:c.call(i,null===(r=m.components)||void 0===r||null===(l=r.Textarea)||void 0===l?void 0:l.defaultProps);return(0,s.jsxs)(b.xu,(0,L.Z)((0,T.Z)({__css:C,borderRadius:"25px",border:"solid 1px",borderColor:"gray.200",display:"flex",flexDirection:"column",padding:0,alignItems:"center",bg:"white",height:"auto",overflow:"hidden",zIndex:"sticky",_hover:{boxShadow:"0 0 0 1px #2015FF",borderColor:"blue.500"},sx:{":has(> .udacity-resizable-text-area:focus)":{boxShadow:"0 0 0 1px #2015FF",borderColor:"blue.500"}}},h),{children:[p&&x&&(0,s.jsx)(nn,{text:p,onRemove:x}),(0,s.jsxs)(v.k,{w:"100%",alignItems:"center",children:[u&&(0,s.jsx)(b.xu,{children:u}),(0,s.jsx)(pe.g,(0,T.Z)({className:"udacity-resizable-text-area",minH:"unset",overflow:j?"auto":"hidden",w:"100%",borderRadius:"0px",_placeholder:{color:"gray.700"},resize:"none",bg:"white",ref:n,minRows:1,as:Ue.Z,onHeightChange:function(e,n){var t=e/n.rowHeight;(null===f||void 0===f?void 0:f.maxRows)&&t>=(null===f||void 0===f?void 0:f.maxRows)?y(!0):y(!1)},_hover:{},_focus:{},_focusVisible:{}},f)),d&&(0,s.jsx)(b.xu,{mr:2,children:d})]})]}))}));tn.displayName="AutoResizeTextArea";var on=tn;function rn(e){var n=e.prompt,t=e.isGenerating,o=e.onStop,i=(0,u.$)().t;return t?(0,s.jsx)(G.u,{label:i("chat.stopGeneration"),placement:"top",children:(0,s.jsx)(J.h,{"aria-label":i("chat.stopGeneration"),icon:(0,s.jsx)(sn,{}),onClick:o,variant:"ghost",height:"32px",width:"32px",minHeight:"32px",minWidth:"32px",alignSelf:"flex-end",colorScheme:"blue",borderRadius:"25px",_focusVisible:{_before:{width:"calc(100% - 4px)",height:"calc(100% - 4px)",borderColor:"blue.500",borderRadius:"25px"}}})}):(0,s.jsx)(J.h,{"aria-label":i("chat.submitLabel"),isDisabled:0===n.length,variant:"ghost",height:"32px",width:"32px",minHeight:"32px",minWidth:"32px",alignSelf:"flex-end",colorScheme:"blue",borderRadius:"25px",type:"submit",icon:(0,s.jsx)(ln,{}),_focusVisible:{_before:{width:"calc(100% - 4px)",height:"calc(100% - 4px)",borderColor:"blue.500",borderRadius:"25px"}}})}function ln(){return(0,s.jsx)(Je.J,{viewBox:"0 0 28 28",fill:"none",height:"24px",width:"24px",children:(0,s.jsx)("path",{d:"M18.6666 14.0002L13.9999 9.3335M13.9999 9.3335L9.33325 14.0002M13.9999 9.3335V18.6668M25.6666 14.0002C25.6666 20.4435 20.4432 25.6668 13.9999 25.6668C7.5566 25.6668 2.33325 20.4435 2.33325 14.0002C2.33325 7.55684 7.5566 2.3335 13.9999 2.3335C20.4432 2.3335 25.6666 7.55684 25.6666 14.0002Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}function sn(){return(0,s.jsxs)(Je.J,{viewBox:"0 0 28 28",fill:"none",height:"24px",width:"24px",children:[(0,s.jsx)("path",{d:"M25.6666 14C25.6666 20.4433 20.4432 25.6667 13.9999 25.6667C7.5566 25.6667 2.33325 20.4433 2.33325 14C2.33325 7.55667 7.5566 2.33333 13.9999 2.33333C20.4432 2.33333 25.6666 7.55667 25.6666 14Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M10.5 10.5H17.5V17.5H10.5V10.5Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}var an=function(e){var n=e.onSubmit,t=e.onTextChange,o=e.onEnterPress,i=e.prompt,r=e.quotedText,l=e.onRemoveQuote,a=e.onStop,c=e.isGenerating,d=(0,u.$)().t;return(0,s.jsx)("form",{onSubmit:n,children:(0,s.jsx)(on,{"aria-label":d("chat.inputPlaceholder"),placeholder:d("chat.inputPlaceholder"),onChange:t,onKeyDown:o,onRemoveQuote:l,value:i,quotedText:r,maxRows:10,border:0,disabled:c,rightIconElement:(0,s.jsx)(rn,{prompt:i,isGenerating:c,onStop:a})})})},cn=t(30112),un=t(76962),dn=t(41657),hn=t(9285),pn=t(41141),xn=t(1702),fn=t(39388),vn=t(60909);function mn(){var e=(0,u.$)().t;return(0,a.useMemo)((function(){return[{id:"quote_to_text",title:e("chat.onboarding.tryQuoteToText.title"),description:e("chat.onboarding.tryQuoteToText.description"),completed:!1},{id:"improve_prompt",title:e("chat.onboarding.improvePrompt.title"),description:e("chat.onboarding.improvePrompt.description"),prompt:e("chat.onboarding.improvePrompt.prompt"),completed:!1},{id:"help_else",title:e("chat.onboarding.helpElse.title"),description:e("chat.onboarding.helpElse.description"),prompt:e("chat.onboarding.helpElse.prompt"),completed:!1}]}),[e])}var gn=(0,V.E)(m.x),bn=function(e){var n=e.value,t=(0,u.$)().t,o=(0,a.useState)(0),i=o[0],r=o[1];return(0,a.useEffect)((function(){r(Math.round(n))}),[n]),(0,s.jsxs)(v.k,{fontSize:"10px",color:"gray.600",alignItems:"center",children:[(0,s.jsx)($.M,{children:(0,s.jsx)(gn,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},fontSize:"10px",children:i},i)}),(0,s.jsxs)(gn,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},marginLeft:"2px",fontSize:"10px",margin:"0px",children:["% ",t("chat.onboarding.complete")]})]})},jn=t(12443),yn=t(28831),Cn=(0,V.E)(b.xu),kn=function(e){var n=e.open,t=e.onComplete,o=(0,u.$)().t;return(0,a.useEffect)((function(){if(n){var e=setTimeout((function(){t()}),1e4);return function(){return clearTimeout(e)}}}),[n,t]),(0,s.jsx)(jn.u_,{isOpen:n,onClose:t,children:(0,s.jsxs)(b.xu,{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",zIndex:"modal",children:[(0,A.Z)(Array(12)).map((function(e,n){return(0,s.jsx)(Cn,{position:"absolute",zIndex:"1",animate:{scale:[0,1,0],rotate:[0,180],opacity:[0,1,0],x:[0,200*Math.cos(30*n)],y:[0,200*Math.sin(30*n)]},transition:{duration:2,repeat:1/0,delay:.1*n,ease:"easeOut"},children:(0,s.jsx)(b.xu,{w:"12px",h:"12px",bg:"blue.400",borderRadius:"full",boxShadow:"0 0 20px rgba(66, 153, 225, 0.8)"})},n)})),(0,s.jsx)(Cn,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",damping:15,stiffness:200},children:(0,s.jsxs)(cn.Z,{bg:"white",p:4,boxShadow:"xl",children:[(0,s.jsx)(R.P,{size:"sm",onClick:t,marginLeft:"auto"}),(0,s.jsxs)(b.xu,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",padding:4,children:[(0,s.jsx)(Cn,{animate:{scale:[1,1.2,1]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"},children:(0,s.jsx)(b.xu,{bg:"blue.500",borderRadius:"full",p:4,boxShadow:"0 0 30px rgba(66, 153, 225, 0.4)",children:(0,s.jsx)(_.nQG,{w:"48px",h:"48px",color:"white","aria-label":"Success"})})}),(0,s.jsxs)(Cn,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[(0,s.jsx)(F.X,{size:"h3",mt:6,color:"gray.800",children:o("chat.onboarding.successModalTitle")}),(0,s.jsx)(m.x,{mt:3,color:"gray.600",fontSize:"lg",fontWeight:"medium",children:o("chat.onboarding.successModalDescription")})]})]})]})}),(0,s.jsx)(yn.Z,{zIndex:"-1",onClick:t})]})})},wn=(0,V.E)(b.xu),Sn=(0,V.E)(cn.Z),Rn=function(e){var n,t=e.onStepClick,o=(0,u.$)().t,r=(0,N.dT)().data,l=(0,i.Z)((0,N.yz)(),1)[0],c=mn(),d=(0,a.useState)(!1),h=d[0],p=d[1],x=(0,a.useState)(!1),f=x[0],j=x[1],y=(0,a.useState)(!1),C=y[0],k=y[1],w=(0,a.useMemo)((function(){return r?c.map((function(e){return(0,L.Z)((0,T.Z)({},e),{completed:r.completedSteps.some((function(n){return n.id===e.id}))})})):[]}),[r,c]),S=w.filter((function(e){return e.completed})).length,R=w.length>0?100*(null!==(n=S/w.length)&&void 0!==n?n:0):0;(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.show)&&w.length>0&&w.every((function(e){return e.completed}))&&(p(!0),j(!0),(0,Z.j)("Onboarding Completed",{type:"track"}))}),[r,w]),(0,a.useEffect)((function(){(null===r||void 0===r?void 0:r.show)&&(k(!0),(0,Z.j)("Onboarding Viewed",{type:"view"}))}),[r]);var I=(0,a.useCallback)((function(){j(!1),setTimeout((function(){k(!1),p(!1),l()}),1e4)}),[l]),E=(0,a.useCallback)((function(){k(!1),l()}),[l]),z=(0,a.useCallback)((function(){k(!1),l(),(0,Z.j)("Onboarding Dismissed",{type:"click"})}),[l]),M=(0,a.useCallback)((function(e){e.completed||t(e)}),[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.M,{children:C&&(0,s.jsx)(Sn,{initial:{height:0,opacity:0},animate:{height:C?"auto":0,opacity:C?1:0},exit:{height:0,opacity:0},transition:{type:"spring",stiffness:260,damping:20},overflow:"hidden",boxShadow:"base",children:(0,s.jsxs)(un.e,{children:[(0,s.jsx)(v.k,{justifyContent:"space-between",children:h?(0,s.jsx)(wn,{initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.5,times:[0,.5,1]},children:o("chat.onboarding.completeTitle")}):o("chat.onboarding.title")}),(0,s.jsx)(dn.E,{value:R,size:"sm",colorScheme:"blue",borderRadius:"full",marginTop:"12px","aria-label":o("chat.onboarding.progressLabel")}),(0,s.jsx)(v.k,{justify:"flex-end",marginTop:"2px",children:(0,s.jsx)(bn,{value:R})}),(0,s.jsx)(W.QI,{listStyleType:"none",margin:"0px",children:w.map((function(e){return(0,s.jsx)(W.HC,{_notFirst:{marginTop:"8px"},children:(0,s.jsx)(wn,{initial:!1,animate:e.completed?{scale:[1,1.05,1],transition:{duration:.3}}:{},children:(0,s.jsx)(In,{onboardingStep:e,onStepClick:M})})},e.id)}))}),h&&(0,s.jsx)(wn,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsx)(m.x,{color:"feedback.positive",fontSize:"sm",fontWeight:"bold",mt:4,textAlign:"center",children:o("chat.onboarding.successMessage")})}),(0,s.jsx)(b.xu,{display:"flex",justifyContent:"flex-end",children:h?(0,s.jsx)(g.z,{size:"xs",colorScheme:"blue",onClick:E,children:o("chat.onboarding.finishButtonText")}):(0,s.jsx)(g.z,{size:"xs",colorScheme:"red",variant:"ghost",onClick:z,children:o("chat.onboarding.dismissButtonText")})})]})})}),(0,s.jsx)(kn,{open:f,onComplete:I})]})},In=function(e){var n=e.onboardingStep,t=e.onStepClick,o=(0,M.Z)(e,["onboardingStep","onStepClick"]),i=(0,u.$)().t;return(0,s.jsxs)(hn.J,{trigger:"hover",placement:"start",children:[(0,s.jsx)(pn.x,{children:(0,s.jsxs)(v.k,(0,L.Z)((0,T.Z)({gap:"4px",alignItems:"flex-end",width:"fit-content"},o),{children:[(0,s.jsx)(wn,{initial:!1,animate:{scale:n.completed?[2,1]:1,transition:{duration:.3}},w:"20px",h:"20px",children:n.completed?(0,s.jsx)(wn,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{duration:.3},w:"20px",h:"20px",children:(0,s.jsx)(_.nQG,{w:"20px",h:"20px",color:"feedback.positive","aria-label":i("chat.onboarding.completeIconLabel"),verticalAlign:"unset"})}):(0,s.jsx)(_.TXi,{w:"20px",h:"20px",color:"gray.500","aria-label":i("chat.onboarding.notCompleteIconLabel"),verticalAlign:"unset"})}),(0,s.jsx)(m.x,{color:n.completed?"black":"gray.500",fontSize:"sm",_hover:{cursor:"pointer"},onClick:function(){return t(n)},children:n.title})]}))}),(0,s.jsx)(xn.h,{children:(0,s.jsxs)(fn.y,{children:[(0,s.jsx)(vn.Q,{}),(0,s.jsx)(m.x,{fontSize:"12px",children:n.description})]})})]})},Zn=(0,a.memo)(Rn);Zn.displayName="Onboarding";var En=t(73935),zn=t(18573),Tn=function(e){var n=e.selectionRange,t=e.children,o=e.isPortal,i=(0,a.useRef)(null);if((0,a.useEffect)((function(){if(n){if(!i.current)return;var e,t={getBoundingClientRect:function(){return n.getBoundingClientRect()},getClientRects:function(){return n.getClientRects()},contextElement:null!==(e=n.commonAncestorContainer.parentElement)&&void 0!==e?e:void 0},o=function(e){var n=window.devicePixelRatio||1;return Math.round(e*n)/n},r=(0,zn.Me)(t,i.current,(function(){i.current&&(0,zn.oo)(t,i.current,{placement:"top",middleware:[(0,zn.Qo)()]}).then((function(e){var n=e.x,t=e.y;(null===i||void 0===i?void 0:i.current)&&Object.assign(i.current.style,{top:0,left:0,transform:"translate(".concat(o(n),"px, ").concat(o(t),"px)")})}))}));return r}}),[n]),!n)return null;var r=(0,s.jsx)(b.xu,{position:"absolute",width:"max-content",top:0,left:0,ref:i,zIndex:"10",children:t});return o?(0,En.createPortal)(r,document.body):r},Ln=function(e){var n=e.onQuoteClick,t=e.selectionRange,o=e.isInChat,i=(0,u.$)().t,r=(0,d.useDispatch)(),l=(0,d.useSelector)((function(e){return e.chat.isChatOpen}));return(0,s.jsx)(Tn,{isPortal:!o,selectionRange:t,children:(0,s.jsx)(G.u,{label:i("chat.quote.tooltip"),placement:"top",children:(0,s.jsx)(J.h,{"aria-label":i("chat.quote.tooltip"),icon:(0,s.jsx)(_.PEf,{w:5,h:5}),onClick:function(){l||r((0,E.WB)()),n()},size:"sm",variant:"solid",colorScheme:"blue",_hover:{bg:"blue.600"},borderRadius:"full"})})})},Mn=function(){var e=(0,u.$)().t,n=(0,ge.a)().user,t=(0,ke.hb)(),r=t.onClose,c=t.queuedMessage,d=t.clearMessage,h=t.isOpen,p=we(h),x=(0,Ie.Z)(!0),f=(0,i.Z)((0,N._P)(),1)[0],g=(0,N.dT)().refetch,j=function(){var e=(0,a.useState)(null),n=e[0],t=e[1],o=(0,a.useState)(null),i=o[0],r=o[1],l=(0,a.useState)(!1),s=l[0],c=l[1],u=(0,a.useCallback)((function(){var e,n=window.getSelection();if(!n||!n.toString().trim())return t(null),void r(null);var o=n.toString().trim(),i=n.getRangeAt(0),l=document.querySelector("[data-chat-panel]"),s=null===l||void 0===l?void 0:l.contains(null===(e=window.getSelection())||void 0===e?void 0:e.anchorNode);c(Boolean(s)),o&&(t(o),r(i))}),[]),d=(0,a.useCallback)((function(){var e;null===(e=window.getSelection())||void 0===e||e.removeAllRanges(),c(!1),t(null),r(null)}),[]);return(0,a.useEffect)((function(){return document.addEventListener("selectionchange",u),function(){document.removeEventListener("selectionchange",u)}}),[u]),{selection:n,selectionRange:i,clearSelection:d,isInChat:s}}(),y=j.selection,C=j.clearSelection,k=j.selectionRange,w=j.isInChat,S=(0,a.useState)(null),R=S[0],I=S[1],E=(0,a.useState)(),z=E[0],M=E[1],_=(0,a.useState)(!1),P=_[0],O=_[1],B=mn(),D=(0,a.useState)(!1),H=D[0],q=D[1],F=(0,a.useState)(0),W=F[0],K=F[1],$=(0,a.useState)(!1),V=$[0],Q=$[1],X=(0,a.useRef)(null),G=function(e){var n=e.userId,t=(0,a.useState)(!1),o=t[0],i=t[1],r=(0,N.S5)(n?{userId:n}:Se.skipToken),l=r.data,s=r.refetch,c=null===l||void 0===l?void 0:l[l.length-1],u=Number(localStorage.getItem(Te)),d=u&&u>Date.now(),h=!!(null===c||void 0===c?void 0:c.createdAt)&&new Date(c.createdAt).getTime()+7776e6>Date.now(),p=d||h,x=(0,a.useCallback)((function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).force&&i(!0),p||i(!0)}),[p]),f=(0,a.useCallback)((function(){i(!1)}),[]),v=(0,a.useCallback)((function(){i(!1),localStorage.setItem(Te,String(Date.now()+864e5))}),[]);return(0,a.useMemo)((function(){return{surveys:l,refetchSurveys:s,mostRecentSurvey:c,isSurveyVisible:o,isSurveyBlocked:p,showSurvey:x,dismissSurvey:v,respondSurvey:f}}),[l,s,c,o,p,x,v,f])}({userId:null===n||void 0===n?void 0:n.id}),J=G.isSurveyVisible,U=G.isSurveyBlocked,Y=G.showSurvey,ee=G.dismissSurvey,ne=G.respondSurvey,te=function(){var e,n,t,o,i,r=(0,Ie.Z)(!0),l=(0,Re.r)(),s=l.lesson,c=l.concept,u=l.atomsByConceptKey,d=(0,Ee.b)().workspaceContext,h=null!==(e=null===c||void 0===c?void 0:c.key)&&void 0!==e?e:"",p=null!==(n=null===s||void 0===s?void 0:s.key)&&void 0!==n?n:"",x=null!==(t=null===r||void 0===r?void 0:r.key)&&void 0!==t?t:"",f=null!==(o=null===r||void 0===r?void 0:r.locale)&&void 0!==o?o:"",v=null!==(i=null===r||void 0===r?void 0:r.version)&&void 0!==i?i:"",m=(0,a.useMemo)((function(){return u&&u[h]&&u[h].find((function(e){return(0,Ze.bF)(e)}))||null}),[u,h]),g=(0,a.useMemo)((function(){var e;return{conceptKey:h,lessonKey:p,node:{key:x,locale:f,version:v},url:null===window||void 0===window||null===(e=window.location)||void 0===e?void 0:e.href}}),[h,p,x,f,v]),b=(0,a.useState)(g),j=b[0],y=b[1];return(0,a.useEffect)((function(){var e;m&&ze.includes((null===(e=m.content.workspaceConfig)||void 0===e?void 0:e.main_container_name)||"")&&d?y((0,L.Z)((0,T.Z)({},g),{workspace:{mainDefaultPath:m.content.mainDefaultPath||"",jupyterSubdomain:d.subdomain,token:d.token}})):y(g)}),[c,m,d]),j}(),oe=function(e){var n,t=e.sessionId,o=(0,Ie.Z)(!0),i=(0,N.v_)((null===o||void 0===o?void 0:o.key)?{programKey:null!==(n=null===o||void 0===o?void 0:o.key)&&void 0!==n?n:""}:Se.skipToken),r=i.data,l=i.refetch,s=i.isLoading,c=i.isError,u=(0,N.R3)(t?{sessionId:t,offset:0,limit:100}:Se.skipToken),d=u.data,h=u.refetch,p=u.isLoading,x=u.isError;return(0,a.useMemo)((function(){return{pastChats:d,refetchChats:h,isPastChatsLoading:p,isPastChatsError:x,sessions:r,refetchSessions:l,isSessionsLoading:s,isSessionsError:c}}),[d,h,p,x,r,l,s,c])}({sessionId:z}),ie=oe.pastChats,re=oe.isPastChatsLoading,le=oe.sessions,se=oe.refetchSessions,ce=oe.refetchChats,ue=(0,a.useState)(""),de=ue[0],he=ue[1],pe=(0,a.useState)([]),xe=pe[0],fe=pe[1],ve=(0,a.useMemo)((function(){return new Oe(fe,M,(function(e){M(e),se()}),te,z)}),[te,z,se]),be=(0,a.useState)(!1),je=be[0],ye=be[1],Le=(0,a.useRef)(null),Me=(0,a.useRef)(0),_e=(0,a.useRef)(0),Pe=re||xe.some((function(e){return!e.answerComplete})),Be=!re&&Boolean(ie),Ae=(0,a.useMemo)((function(){var e;if(z)return null!==(e=null===ie||void 0===ie?void 0:ie.filter((function(e){return!xe.map((function(e){return e.chatId})).includes(e.chatId)})))&&void 0!==e?e:[]}),[ie,xe,z]),He=(0,a.useMemo)((function(){var e=(!P&&Ae?Ae:[]).concat(xe);return e.sort((function(e,n){var t,o;return Number(null!==(t=null===e||void 0===e?void 0:e.timestamp)&&void 0!==t?t:0)-Number(null!==(o=null===n||void 0===n?void 0:n.timestamp)&&void 0!==o?o:0)})),e}),[Ae,xe,P]);(0,a.useEffect)((function(){!P&&Be&&setTimeout((function(){var e;null===(e=X.current)||void 0===e||e.scrollToBottom()}),0)}),[Be,P]),(0,a.useEffect)((function(){!P&&!z&&le&&le.length>0&&M(le[0].id)}),[P,le,z,M,c]),(0,a.useEffect)((function(){var e,n;c&&((null===(e=c.additionalData)||void 0===e||null===(n=e.workspace)||void 0===n?void 0:n.helpRequested)&&(fe([]),O(!0),M(void 0)),ve.sendMessage(c.message,void 0,c.additionalData),d())}),[c,ve,d]),(0,a.useEffect)((function(){h&&0===He.length&&!c&&K((function(e){return e+1}))}),[h,He,c]),(0,a.useEffect)((function(){le&&0===le.length&&O(!0)}),[le]);var qe=(0,a.useCallback)(function(){var e=(0,o.Z)((function(e){var n,t,o,i;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return(n=Date.now())-Me.current<300?[2]:(Me.current=n,t=[],o=B.find((function(n){return n.prompt===e})),t=o?[{id:o.id}]:[],o&&(0,Z.j)("Onboarding Step Completed",{type:"track",step_id:o.id}),R&&(t=(0,A.Z)(t).concat([{id:"quote_to_text"}]),(0,Z.j)("Onboarding Step Completed",{type:"track",step_id:"quote_to_text"})),ye(!0),Le.current=new AbortController,i=ve.sendMessage(e,Le.current.signal,{onboardingSteps:t}).finally((function(){ye(!1),Le.current=null})),he(""),Q(!0),[4,i]);case 1:return r.sent(),Q(!1),t.length>0&&g(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[ve,g,R,B]),Fe=(0,a.useCallback)((function(){var e=Date.now();e-_e.current<300||e-Me.current<300||(_e.current=e,Le.current&&(Le.current.abort(),Le.current=null,ye(!1),Q(!1),fe((function(e){var n=(0,A.Z)(e);return n.length>0&&n.pop(),n})),setTimeout((function(){var e;null===(e=X.current)||void 0===e||e.scrollToBottom()}),0)))}),[Le,fe]),We=(0,a.useCallback)((function(){y&&(I(y),C())}),[y,C]),Ne=(0,a.useCallback)((function(){I(null)}),[]),Ve=function(e){if(e.preventDefault(),!Pe&&""!==de){var n=R?"> ".concat(R,"\n\n").concat(de):de;qe(n),I(null)}},Qe=(0,a.useCallback)((function(e){e.target.value,he(e.target.value)}),[he]),Ge=(0,a.useCallback)((function(e){var n;(J&&ee(),!U&&He.length>0)?Y():(null===(n=e.currentTarget)||void 0===n||n.blur(),r())}),[r,Y,He,J,U,ee]),Je=(0,a.useCallback)((function(){if((null===x||void 0===x?void 0:x.key)&&z&&le){var e=null===le||void 0===le?void 0:le.filter((function(e){return e.id!==z}));f({sessionId:z,programKey:x.key,sessions:e}),q(!1),M(void 0),fe([]),K((function(e){return e+1})),O(!0),he("")}}),[x,z,f,le]),Ue=(0,a.useCallback)((function(){ee(),q((function(e){return!e})),(0,Z.j)("View Chat History Clicked",{type:"click"})}),[]),Ye=(0,a.useCallback)((function(){q(!1),setTimeout((function(){var e;null===(e=X.current)||void 0===e||e.scrollToBottom()}),0)}),[]),en=(0,a.useCallback)((function(){ee(),q(!1),M(void 0),fe([]),K((function(e){return e+1})),O(!0),he(""),(0,Z.j)("New Chat Clicked",{type:"click"})}),[]),nn=(0,a.useCallback)((function(e){M(e),q(!1),O(!1),fe([]),he("")}),[]),tn=(0,a.useCallback)((function(e){e.prompt&&he(e.prompt)}),[]),on=(0,a.useCallback)(function(){var e=(0,o.Z)((function(e){var n,t;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return n=(0,A.Z)(xe).concat((0,A.Z)(He)),(t=(n.find((function(n){return n.chatId===e}))||{}).question)?(ye(!0),Le.current=new AbortController,[4,ve.sendMessage(t,Le.current.signal).finally((function(){ye(!1),Le.current=null}))]):[2];case 1:return o.sent(),[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[xe,He,ve]),rn=(0,a.useMemo)((function(){return P||Be?He.map((function(e,n){var t,o=e.chatId,i=e.question,r=e.answer,l=e.answerErrored,a=e.timestamp,c=!!r;return[(0,s.jsx)(me,{current:a,previous:null===He||void 0===He||null===(t=He[n-1])||void 0===t?void 0:t.timestamp},"".concat(n,"-timestamp")),(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(b.xu,{my:"1.5rem",p:"0.5rem 1rem",ms:"calc(1.25rem + 40px)",me:"1.5rem",bg:"blue.400",borderRadius:"16px",whiteSpace:"pre-line",children:(0,s.jsx)(m.x,{color:"white",children:i})}),(0,s.jsx)(_n,{chatId:o,showAnswer:c,answerErrored:l,answer:r,onRegenerate:function(){return on(o)}})]},"".concat(n,"-message"))]})):(0,s.jsx)(b.xu,{paddingX:"20px",marginY:"16px",children:(0,s.jsx)(ae,{isLoading:!0})})}),[He,Be,P,on]),ln=(0,a.useMemo)((function(){return e(J?"chat.header.feedbackSurvey":H?"chat.header.history":"chat.header.title")}),[J,H,e]),sn=(0,a.useMemo)((function(){return J||H}),[J,H]),cn=(0,a.useCallback)((function(){J?ee():Ye()}),[ee,Ye,J]),un=(0,a.useCallback)((function(){return Ye(),J?ee():Y({force:!0})}),[J,Y,ee,Ye]);return(0,a.useEffect)((function(){if(H){var e=function(){var e=(0,o.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,Promise.all([se(),ce()])];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),console.error("Failed to refresh chat history:",e),[3,3];case 3:return[2]}}))}));return function(){return e.apply(this,arguments)}}();e()}}),[H,se,ce]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(v.k,{as:"section","aria-labelledby":"chat-heading",display:p?"flex":"none",direction:"column",bg:"white",w:"full",h:"full",ps:"6px","data-chat-panel":!0,children:[(0,s.jsx)(Ke,{title:ln,onClose:Ge,onViewHistory:Ue,onNewChat:en,showBackButton:sn,onShowSurvey:un,onBack:cn,onClearChat:Je}),(0,s.jsx)(b.xu,{marginX:"16px",children:(0,s.jsx)(Zn,{onStepClick:tn})}),H?(0,s.jsx)(b.xu,{overflow:"auto",children:(0,s.jsx)($e,{onSelectSession:nn,selectedSessionId:z,sessions:le,onDeleteCurrentSession:Je,onBack:Ye})}):(0,s.jsxs)(b.xu,{display:"grid",h:"full",gridTemplateRows:"1fr auto",overflow:"hidden",children:[(0,s.jsxs)(v.k,{flexDir:"column",justifyContent:"flex-start",overflow:"hidden","aria-live":"polite",position:"relative",children:[y&&(0,s.jsx)(Ln,{isInChat:w,selectionRange:k,onQuoteClick:We}),J?(0,s.jsx)(b.xu,{padding:"20px",children:(0,s.jsx)(Xe,{onDismiss:function(){ee(),setTimeout(r,200)},onRespond:function(){ne(),setTimeout(r,200)}})}):(0,s.jsx)(De,{isAutoScrolling:V,ref:X,welcomeMessage:P&&0===He.length?(0,s.jsx)(b.xu,{paddingX:"20px",marginY:"16px",children:(0,s.jsx)(Ce,{},W)}):null,children:rn})]}),!J&&(0,s.jsx)(b.xu,{padding:".5rem 1rem 1rem 1rem",zIndex:"sticky",bg:"white",children:(0,s.jsx)(an,{onSubmit:Ve,onTextChange:Qe,onEnterPress:function(e){"Enter"!==e.key||e.shiftKey||Ve(e)},prompt:de,quotedText:null!==R&&void 0!==R?R:void 0,onRemoveQuote:Ne,onStop:Fe,isGenerating:je})})]})]})})},_n=(0,a.memo)((function(e){var n=e.chatId,t=e.showAnswer,o=e.answerErrored,i=e.answer,r=e.onRegenerate,l=(0,fe.z)().track;return(0,s.jsx)(se,(0,L.Z)((0,T.Z)({chatId:n,isLoading:!t&&!o},t||o?{}:{bg:"white"}),{rawAnswer:i,onRegenerate:r,children:o?(0,s.jsx)(Pn,{}):t?(0,s.jsx)(b.xu,{sx:{'[data-defines-codeblock="true"]':{margin:"0px",maxWidth:"unset",padding:"12px",fontSize:"12px","> div > p":{fontSize:"12px",color:"white",marginLeft:"8px"}}},children:(0,s.jsx)(K.SimpleMarkdown,{remarkPlugins:[q.Z],components:{a:function(e){var n=e.children,t=e.href;return(0,s.jsx)(j.r,{isExternal:!0,href:t,onClick:function(){l("Chat Link Clicked",{url:t})},children:n})},code:(0,K.getCodeRenderer)({showLanguageHeading:!0,showCopyButton:!0,isDarkMode:!0,onCopyButtonCopy:function(e){var n=e.event,t=e.markdownText;l("Chat Copied Code Snippet",{cta_type:n.type,code:t})}})},markdownText:i})}):(0,s.jsx)(b.xu,{height:"24px"})}))}));_n.displayName="Answer";var Pn=(0,a.memo)((function(){var e=(0,u.$)().t;return(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(F.X,{size:"h4",children:e("chat.error.heading")}),(0,s.jsx)(m.x,{my:4,children:e("chat.error.text")}),(0,s.jsxs)(W.QI,{my:4,children:[(0,s.jsx)(W.HC,{children:(0,s.jsx)(H.c,{i18nKey:"chat.error.options.helpCenter",components:{help_link:(0,s.jsx)(j.r,{href:"https://support.udacity.com/hc/en-us",isExternal:!0})}})}),(0,s.jsx)(W.HC,{children:(0,s.jsx)(H.c,{i18nKey:"chat.error.options.support",components:{support_link:(0,s.jsx)(j.r,{href:"https://support.udacity.com/hc/en-us/requests/new?ticket_form_id=110806",isExternal:!0})}})})]}),(0,s.jsx)(m.x,{children:e("chat.error.thankYou")})]})})),On=function(e){var n=e.isOpen,t=e.isResizable,o=e.width,i=e.minWidth,r=e.maxWidth,l=e.onPanelResize,c=e.onResizeStart,u=e.onResizeEnd,d=e.animation;return(0,a.useEffect)((function(){var e=n?E.Lm:E.IO;(0,Z.j)(e,{variant:"current-with-tooltip"})}),[n]),(0,s.jsx)(D,{xPosition:"end",isOpen:n,width:o,animation:d,onPanelResize:l,isResizable:t,maxWidth:r,minWidth:i,onResizeStart:c,onResizeEnd:u,children:(0,s.jsx)(Mn,{})})},Bn=t(20682),Dn=t(67649),An=t(84818),Hn=t(51179),qn=t(20922);function Fn(e){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,o.Z)((function(e){var n,t,o;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:n=(0,Pe.v_)(),t=(0,Pe.sq)(),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,qn.v_)("".concat((0,Hn.H)("/api/enrollments"),"/v1/enrollments"),{node_key:e,state:"ENROLLED",user_key:t},{Authorization:"Bearer ".concat(n)})];case 2:return i.sent(),[3,4];case 3:return o=i.sent(),console.error(o),[2,[]];case 4:return[2]}}))}))).apply(this,arguments)}var Kn=function(e){return e.lessonPanel.isLessonPanelOpen},Nn=t(7634),$n=t(66537),Vn=t(80725),Qn=t(17570),Xn=t(61194),Gn=t(79136);function Jn(e){return Array.isArray(e)?e[0]:e}function Un(){var e,n=(0,c.useRouter)(),t=n.query,o=t.nanodegreeKey,i=t.partKey,r=t.paidCourseKey,l=t.freeCourseKey,s=t.lessonKey,a=t.conceptKey,u=t.labKey,d=n.isReady,h=null!==(e=[o,i,r,l,s,a,u].map(Jn).find(Boolean))&&void 0!==e?e:"",p=(0,Gn.D)({programKey:h},{skip:!d||!h});return(0,L.Z)((0,T.Z)({},p),{getProgressByKey:function(e){var n,t,o,i=null===p||void 0===p||null===(n=p.data)||void 0===n||null===(t=n.programs)||void 0===t||null===(o=t[0])||void 0===o?void 0:o.nodes;if(i&&e)return i.find((function(n){return n.key===e}))}})}var Yn=t(7886),et=t(86190),nt=t(41664),tt=t.n(nt),ot=t(24880),it=t(51423),rt=t(80438),lt=function(e){var n=e.isCompleted,t=(0,u.$)().t;return n?(0,s.jsx)(rt.R,{in:!0,children:(0,s.jsx)(_.YJ9,{color:"accent.sea-foam.500",w:8,h:8,mt:-1,role:"img","aria-label":t("lesson.conceptCompletedIcon")})}):(0,s.jsx)(_.TXi,{color:"gray.200",w:8,h:8,mt:-1,role:"img","aria-label":t("lesson.conceptIncompleteIcon")})},st=function(e){var n=e.isActive,t=e.isCompleted,o=e.projectStatus,r=e.iconOverride,l=e.label,c=e.href,u=e.onScroll,h=e.onClick,p=(0,i.Z)((0,Nn.dQ)("colors",["blue.500"]),1)[0],f=(0,i.Z)((0,x.a)("(min-width: 800px)"),1)[0],v=(0,a.useRef)(null),g=(0,d.useDispatch)();(0,a.useEffect)((function(){u&&v.current&&u(v.current)}),[u]);var j=c.split("?")[0],y=(0,it.K)().queryParams;y.delete("lesson_tab"),y.append("lesson_tab","lesson");var C=y.toString();return(0,s.jsx)(W.HC,{ref:v,"data-active":n,position:"relative",_hover:{bg:"gray.50"},sx:{'&[data-active="true"]':{bg:"gray.50"},'&[data-active="true"]::before':{content:'""',position:"absolute",left:0,bottom:0,top:0,border:"2px solid",borderColor:"accent.sea-foam.500",display:"inline-block"}},children:(0,s.jsx)(tt(),{href:{pathname:j,query:C},passHref:!0,children:(0,s.jsxs)(b.xu,{as:"a",onClick:function(){h(),f||g((0,Xn.E_)())},py:3,ps:"8px",pe:6,gap:2,display:"flex",color:"inherit",w:"full",textAlign:"start",alignItems:"center",_focus:{border:"none !important",outline:"none !important"},_focusVisible:{outline:"none !important",border:"none !important",boxShadow:"inset 0 0 0 2px ".concat(p," !important")},children:[r||(0,s.jsx)(lt,{isCompleted:t}),(0,s.jsx)(m.x,{as:"span",whiteSpace:"pre-wrap",children:l}),o&&(0,s.jsx)(at,{status:o})]})})})},at=function(e){var n,t,o,i=e.status,r=(n={},(0,z.Z)(n,Ze.kJ.IN_REVIEW,"gray"),(0,z.Z)(n,Ze.kJ.PASSED,"green"),(0,z.Z)(n,Ze.kJ.HAS_FEEDBACK,"yellow"),(0,z.Z)(n,Ze.kJ.ERRED_SUBMISSION,"yellow"),n),l=(t={},(0,z.Z)(t,Ze.kJ.IN_REVIEW,"Submitted"),(0,z.Z)(t,Ze.kJ.PASSED,"Passed"),(0,z.Z)(t,Ze.kJ.HAS_FEEDBACK,"Needs Update"),(0,z.Z)(t,Ze.kJ.ERRED_SUBMISSION,"Needs Update"),t),a=r[i],c=null!==(o=l[i])&&void 0!==o?o:"";return a?(0,s.jsx)(ot.C,{textTransform:"uppercase",variant:a,fontWeight:"bold",borderRadius:"base",paddingInline:2,paddingY:1,children:c}):null},ct=function(e){var n=e.lessonIndex,t=e.activeContent,o=e.lesson,i=e.onConceptClick,r=e.onScroll,l=(0,u.$)().t,a=(0,et.Z)().getContentPath,c=Un().getProgressByKey;return o?(0,s.jsx)(W.QI,{m:0,p:0,listStyleType:"none",overflow:"auto",pos:"relative",h:"full","aria-label":l("lesson.conceptList",{title:o.title}),children:(0,Yn.kz)(o).map((function(e,u){var d=e.id===(null===t||void 0===t?void 0:t.id)&&e.kind===(null===t||void 0===t?void 0:t.kind);if((0,Ze.Op)(e)){var h,p,x,f,v,m,g,b,j,y=e.isSubmitProject&&(null===(h=o.project)||void 0===h||null===(p=h.projectState)||void 0===p?void 0:p.status)!==Ze.kJ.PASSED?(0,s.jsx)(_.Rg1,{w:8,h:8}):void 0,C=e.isSubmitProject?null===(x=o.project)||void 0===x||null===(f=x.projectState)||void 0===f?void 0:f.status:void 0,k=e.isSubmitProject?l("lesson.submitProject"):e.isProjectRubric?l("lesson.projectRubric"):e.title,w=e.isProjectRubric?!!(null===(v=o.userState)||void 0===v?void 0:v.rubricViewed):e.isSubmitProject?(null===(m=o.project)||void 0===m||null===(g=m.projectState)||void 0===g?void 0:g.status)===Ze.kJ.PASSED:100===(null===(b=c(e.progressKey))||void 0===b?void 0:b.completion);return(0,s.jsx)(st,{isActive:d,iconOverride:y,projectStatus:C,isCompleted:w,href:null!==(j=a(e,o))&&void 0!==j?j:"",label:k?"".concat(n,".").concat(u+1,"  ").concat(k):"",onClick:function(){return i(e)},onScroll:d?r:void 0},e.key)}var S,R,I,Z=null===(S=e.id)||void 0===S?void 0:S.toString(),E=100===(null===(R=c(Z))||void 0===R?void 0:R.completion),z=E?void 0:(0,s.jsx)(_.VGR,{w:6,h:6});return(0,s.jsx)(st,{iconOverride:z,isActive:d,isCompleted:E,href:null!==(I=a(e,o))&&void 0!==I?I:"",label:"".concat(n,".").concat(u+1,"  ").concat(l("common.lab"),": ").concat(e.title),onClick:function(){return i(e)},onScroll:r},e.key)}))}):(0,s.jsx)(W.QI,{m:0,p:0,listStyleType:"none",overflow:"auto"})},ut=t(50563),dt=t(34384),ht=t(69008),pt=t(95938),xt=t(69200),ft=t(64715),vt=t(28755),mt=function(e){var n=e.isActive,t=e.label,o=e.index,r=e.progress,l=void 0===r?0:r,c=e.conceptsListSlot,d=void 0===c?null:c,h=e.onLessonOpen,p=(0,u.$)().t,x=(0,a.useState)(0),f=x[0],v=x[1],m=(0,a.useRef)(null),g="lesson-progress-".concat(o),j=(0,i.Z)((0,Nn.dQ)("colors",["blue.500"]),1)[0];return(0,s.jsx)(W.HC,{ref:m,children:(0,s.jsx)(ut.U,{allowToggle:!0,index:n?f:void 0,onChange:function(e){e>-1&&(h(),setTimeout((function(){var e;return null===(e=m.current)||void 0===e?void 0:e.scrollIntoView({behavior:"smooth",block:"start"})}),200)),v(e)},children:(0,s.jsx)(dt.Q,{backgroundColor:"transparent",children:function(e){var n=e.isExpanded;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(ht.K,{gap:3,display:"flex",color:"inherit",backgroundColor:"transparent",padding:"16px 8px",paddingEnd:"12px !important",flexDir:"row-reverse",borderInline:"none",borderTop:"none",borderColor:"#F6F6F6 !important",_hover:{backgroundColor:"gray.50",outline:"none"},_focusVisible:{border:"none !important",boxShadow:"inset 0 0 0 2px ".concat(j," !important")},children:[(0,s.jsx)(_.v4q,{transform:n?"rotate(180deg)":"",w:6,h:6}),(0,s.jsxs)(b.xu,{id:g,as:"span",flex:"1",textAlign:"left",children:[(0,s.jsxs)(pt.TX,{children:[p("lesson.lessonNumber",{index:o})," "]}),t]}),(0,s.jsx)(xt.D,{"aria-labelledby":g,color:"accent.sea-foam.500",value:l,size:"32px",children:(0,s.jsx)(ft.i,{"aria-hidden":!0,fontSize:"xs",children:o})})]}),(0,s.jsx)(vt.H,{p:0,border:"none",borderColor:"#F6F6F6 !important",children:d})]})}})})})},gt=function(e){var n=e.lessons,t=e.activeContent,o=e.onConceptClick,i=e.onConceptListScroll,r=e.onLessonOpen,l=(0,c.useRouter)().query.lessonKey,a=Un().getProgressByKey,d=(0,u.$)().t;return(0,s.jsx)(W.GS,{m:0,p:0,listStyleType:"none","aria-label":d("common.lessons"),children:null===n||void 0===n?void 0:n.map((function(e,n){if(e.title){var c=a(e.progressKey),u=e.key===l;return(0,s.jsx)(mt,{label:e.title,isActive:u,index:n+1,progress:null===c||void 0===c?void 0:c.completion,onLessonOpen:function(){return r(e)},conceptsListSlot:(0,s.jsx)(ct,{lessonIndex:n+1,activeContent:t,lesson:e,onConceptClick:o,onScroll:i})},e.id)}return null}))})},bt=t(9856),jt=t(1215);function yt(e){var n,t,o,r=e.nanodegree,l=e.part,a=e.index,c=e.isActive,h=Un().getProgressByKey,p=(0,u.$)().t,f=(0,it.K)().queryString,g=(0,i.Z)((0,Nn.dQ)("colors",["blue.500"]),1)[0],j=(0,i.Z)((0,x.a)("(min-width: 800px)"),1)[0],y=null!==(o=null===(n=h(l.progressKey))||void 0===n?void 0:n.completion)&&void 0!==o?o:0,C=(0,d.useDispatch)(),k="course-progress-".concat(a),w=jt.FO.nanodegree({nanodegree:r,part:l,lesson:null===l||void 0===l||null===(t=l.lessons)||void 0===t?void 0:t[0],queryString:f});return(0,s.jsx)(tt(),{href:w,passHref:!0,children:(0,s.jsx)(W.HC,{"data-active":c,as:"a",px:4,py:3,position:"relative",width:"100%",display:"block",borderBottom:"solid 1px",borderColor:"gray.100",onClick:function(){j||C((0,Xn.E_)())},_hover:{backgroundColor:"gray.50"},sx:{'&[data-active="true"]':{backgroundColor:"gray.100"}},_focusVisible:{border:"none !important",boxShadow:"inset 0 0 0 2px ".concat(g," !important")},_focus:{outline:"none"},children:(0,s.jsxs)(v.k,{gap:2,alignItems:"center",flexDir:"row-reverse",textAlign:"left",children:[(0,s.jsxs)(b.xu,{flex:"1",id:k,children:[(0,s.jsx)(m.x,{fontWeight:"600",fontSize:"md",children:p("lesson.courseNumber",{index:a+1})})," ",(0,s.jsx)(m.x,{size:"caption",children:l.title})]}),(0,s.jsx)(xt.D,{"aria-labelledby":k,size:"32px",thickness:"16px",value:y,color:"accent.sea-foam.500",children:(0,s.jsx)(ft.i,{children:(0,s.jsx)(pt.TX,{children:y})})})]})})})}function Ct(e){var n,t=e.nanodegree,o=(0,c.useRouter)().query.partKey,i=(0,u.$)().t;return(0,s.jsxs)(b.xu,{position:"relative",children:[(0,s.jsx)(m.x,{p:"12px 16px",size:"label",borderBottom:"solid 1px",borderColor:"gray.100",top:0,zIndex:2,bg:"white",position:"sticky",children:i("lesson.coursesInProgram")}),(0,s.jsx)(W.GS,{listStyleType:"none",p:0,m:0,"aria-label":i("common.courses"),children:null===t||void 0===t||null===(n=t.parts)||void 0===n?void 0:n.map((function(e,n){return(0,s.jsx)(yt,{isActive:o===e.key,index:n,part:e,nanodegree:t},e.key)}))})]})}function kt(e){var n,t,o,r=e.part,l=e.nanodegree,a=e.isPartListOpen,c=e.onClose,d=e.onPartMenuClick,h=(0,u.$)().t,p=null===l||void 0===l||null===(n=l.parts)||void 0===n?void 0:n.findIndex((function(e){return e.key===r.key})),f=(0,i.Z)((0,Nn.dQ)("colors",["gray.100"]),1)[0],v=(0,i.Z)((0,x.a)("(min-width: 800px)"),1)[0];return(0,s.jsx)(b.xu,{px:2,borderBottom:"1px solid",borderBottomColor:"gray.100",pt:"8px",pb:"24px",children:v?(0,s.jsxs)(hn.J,{isOpen:a,placement:"bottom-start",onClose:c,children:[(0,s.jsx)(pn.x,{children:(0,s.jsx)(b.xu,{as:"button",width:"100%",children:(0,s.jsx)(wt,{partIndex:null!==p&&void 0!==p?p:0,partTitle:null!==(t=r.title)&&void 0!==t?t:"",isPartListOpen:a,onClick:d})})}),(0,s.jsx)(fn.y,{p:0,border:"none",borderRadius:"base",_focus:{boxShadow:"none",outline:"none"},children:(0,s.jsx)(bt.b,{shadow:"lg",background:"white",border:"solid 1px",borderColor:"gray.200",rounded:"base",maxHeight:"50vh",sx:{scrollbarWidth:"thin",scrollbarColor:"".concat(f," white")},overflow:"auto",children:(0,s.jsx)(Ct,{nanodegree:l})})})]}):(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(wt,{partIndex:null!==p&&void 0!==p?p:0,partTitle:null!==(o=r.title)&&void 0!==o?o:"",isPartListOpen:a,isButton:!0,onClick:d}),(0,s.jsxs)($n.d,{placement:"right",onClose:c,isOpen:a,size:"full",children:[(0,s.jsx)(yn.Z,{}),(0,s.jsxs)(Vn.s,{bg:"white",color:"black",children:[(0,s.jsx)(b.xu,{borderBottom:"1px solid",borderColor:"gray.100",py:4,children:(0,s.jsx)(g.z,{size:"sm",width:"fit-content",leftIcon:(0,s.jsx)(_.Y4O,{width:5,height:5}),onClick:c,variant:"link",color:"accent.sea-foam.500",children:h("common.back")})}),(0,s.jsx)(Ct,{nanodegree:l})]})]})]})})}function wt(e){var n=e.partIndex,t=e.partTitle,o=e.isButton,r=e.onClick,l=(0,u.$)().t,a=(0,i.Z)((0,Nn.dQ)("colors",["blue.500"]),1)[0];return(0,s.jsxs)(v.k,{as:o?"button":"div","aria-label":l("lesson.change"),rounded:"md",alignItems:"center",justifyContent:"space-between",gap:"8px",padding:"8px",width:"100%",paddingEnd:0,bg:"gray.50",textAlign:"start",_hover:{bg:"gray.100"},_focus:{outline:"none"},_focusVisible:{border:"none !important",boxShadow:"inset 0 0 0 2px ".concat(a," !important")},onClick:r,children:[(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(m.x,{size:"small-label",color:"gray.900",children:l("lesson.courseNumber",{index:(null!==n&&void 0!==n?n:0)+1})}),(0,s.jsx)(m.x,{flex:1,children:t})]}),(0,s.jsx)(_.Huf,{width:"32px",height:"24px"})]})}function St(e){var n,t,o=e.programTitle,i=Un().data,r=Math.round((null===i||void 0===i||null===(n=i.programs)||void 0===n||null===(t=n[0])||void 0===t?void 0:t.completion)||0);return(0,s.jsx)(xt.D,{value:r,color:"accent.sea-foam.500",size:"48px","aria-labelledby":"root-program-progress",children:(0,s.jsx)(ft.i,{id:"root-program-progress",children:(0,s.jsxs)(H.c,{i18nKey:"lesson.modulePercentComplete",children:[(0,s.jsx)(pt.TX,{children:{title:o}})," ",{percent:r}," ",(0,s.jsx)(pt.TX,{children:"complete"})]})})})}function Rt(e){var n=e.children,t=(0,Bn.C)();return t?(0,s.jsx)(tt(),{passHref:!0,href:"".concat((0,Hn.H)("https://udacity.com"),"/enrollment/").concat(t.program.key),children:(0,s.jsx)(m.x,{textDecoration:"underline",as:"a",fontSize:"lg",fontWeight:"600",children:n})}):(0,s.jsx)(m.x,{fontSize:"lg",fontWeight:"600",children:n})}var It=function(){var e,n,t,o,r,l=(0,d.useSelector)(Kn),c=(0,i.Z)((0,Nn.dQ)("colors",["gray.100"]),1)[0],h=(0,Re.r)(),p=h.paidCourse,x=h.freeCourse,m=h.part,g=h.lesson,j=h.concept,y=h.lab,C=h.nanodegree,k=(0,u.$)().t,w=(0,fe.z)().track,S=(0,d.useDispatch)(),R=function(){return S((0,Xn.E_)())},I=(0,a.useMemo)((function(){return{part_key:null===m||void 0===m?void 0:m.key,lesson_key:null===g||void 0===g?void 0:g.key,concept_key:null===j||void 0===j?void 0:j.key}}),[null===j||void 0===j?void 0:j.key,null===g||void 0===g?void 0:g.key,null===m||void 0===m?void 0:m.key]),Z=(0,a.useMemo)((function(){return null!==(n=null!==(e=null===m||void 0===m?void 0:m.lessons)&&void 0!==e?e:null===p||void 0===p?void 0:p.lessons)&&void 0!==n?n:null===x||void 0===x?void 0:x.lessons}),[null===m||void 0===m?void 0:m.lessons,null===p||void 0===p?void 0:p.lessons,null===x||void 0===x?void 0:x.lessons]),E=(0,f.q)(),z=E.onToggle,M=E.isOpen,P=E.onClose,O=(0,a.useCallback)((function(e){if(e){var n=e.offsetParent;if(n)if(e.offsetTop<n.scrollTop)n.scrollTo({left:0,top:e.offsetTop,behavior:"smooth"});else{var t=e.offsetTop+e.offsetHeight;t>n.scrollTop+n.offsetHeight&&n.scrollTo({left:0,top:t-n.offsetHeight,behavior:"smooth"})}}}),[]),B=(0,a.useCallback)((function(e){w("Learning Nav Clicked",(0,L.Z)((0,T.Z)({},I),{cta_type:"text",destination_key:e.key}))}),[w,I]),D=(0,a.useCallback)((function(){M||w("Part List Opened",(0,T.Z)({},I)),z()}),[M,z,w,I]),A=(0,a.useCallback)((function(e){w("Part Clicked",(0,L.Z)((0,T.Z)({},I),{cta_type:"text",destination_key:e.key}))}),[w,I]),H=(0,a.useCallback)((function(){return w("Lesson Expanded",(0,T.Z)({},I))}),[w,I]),q=we(l),F=null!==(r=null!==(o=null!==(t=null===C||void 0===C?void 0:C.title)&&void 0!==t?t:null===p||void 0===p?void 0:p.title)&&void 0!==o?o:null===m||void 0===m?void 0:m.title)&&void 0!==r?r:null===x||void 0===x?void 0:x.title;return(0,s.jsx)(Zt,{isOpen:l,onClose:R,children:(0,s.jsx)(b.xu,{"aria-label":k("lesson.conceptListLabel"),color:"black",bg:"white",h:"full",position:"relative",borderEnd:"solid 2px",borderColor:"gray.100",zIndex:2,py:"16px",children:(0,s.jsxs)(b.xu,{display:q?"flex":"none",height:"full",flexDir:"column",children:[(0,s.jsxs)(v.k,{flexDir:"row-reverse",alignItems:"center",gap:2,px:2,mb:"16px",children:[(0,s.jsxs)(v.k,{flex:"1",alignItems:"center",justifyContent:"space-between",children:[(0,s.jsx)(Rt,{children:F}),(0,s.jsx)(J.h,{size:"sm","aria-label":k("lesson.closeSidePanel"),variant:"ghost",colorScheme:"gray",icon:(0,s.jsx)(Qn.e,{children:(0,s.jsx)(_.Two,{w:6,h:6,color:"black"})}),onClick:function(e){var n;null===e||void 0===e||null===(n=e.currentTarget)||void 0===n||n.blur(),R()}})]}),(0,s.jsx)(St,{programTitle:F})]}),(0,s.jsxs)(v.k,{flexDir:"column",h:"full",overflow:"hidden",children:[C&&m&&(0,s.jsx)(kt,{part:m,nanodegree:C,isPartListOpen:M,onClose:P,onPartClick:A,onPartMenuClick:D}),(0,s.jsx)(v.k,{flexDir:"column",overflow:"auto",borderTop:C||m?void 0:"1px solid",borderTopColor:"gray.100",flex:1,sx:{scrollbarWidth:"thin",scrollbarColor:"".concat(c," white")},children:(0,s.jsx)(gt,{lessons:Z,onConceptClick:B,onConceptListScroll:O,onLessonOpen:H,activeContent:j||y})})]})]})})})},Zt=function(e){var n=e.children,t=e.isOpen,o=e.onClose,r=(0,i.Z)((0,x.a)("(min-width: 800px)"),1)[0],l="rtl"===(0,u.$)().i18n.dir();return r?(0,s.jsx)(b.xu,{height:"100%",children:n}):(0,s.jsx)(b.xu,{children:(0,s.jsxs)($n.d,{placement:l?"right":"left",onClose:o,isOpen:t,size:"full",children:[(0,s.jsx)(yn.Z,{}),(0,s.jsx)(Vn.s,{children:n})]})})},Et=function(e){var n=e.onClick,t=(0,u.$)(),o=t.i18n,i=t.t,r=(0,d.useDispatch)(),l=function(){return"rtl"===o.dir()?"50% 0 0 50%":"0 50% 50% 0"};return(0,s.jsx)(b.xu,(0,L.Z)((0,T.Z)({},"rtl"===o.dir()?{right:"-2px"}:{left:"-2px"}),{pos:"fixed",top:"88px",transition:"all 0.2s ease-in",background:"white",borderRadius:l(),children:(0,s.jsx)(J.h,{"aria-label":i("lesson.toggleSidePanel"),icon:(0,s.jsx)(_.nTF,{w:8,h:8}),color:"black",variant:"outline",isRound:!0,p:2,borderRadius:l(),onClick:function(){null===n||void 0===n||n(),r((0,Xn.jP)())},onMouseDown:function(e){return e.preventDefault()},height:"56px",width:"56px"})}))};function zt(){var e=(0,r.Z)(["\n  0% { width: 25rem; }\n  50% { width: 26rem; }\n  100% { width: 25rem; }\n"]);return zt=function(){return e},e}var Tt="20rem",Lt=[{key:"nd003",newMajorVersion:5,supportUrl:"https://support.udacity.com/hc/en-us/articles/28064758530445-Difference-between-previous-iOS-Developer-and-the-new-iOS-Development-SwiftUI-and-SwiftData-Nanodegree-Program"},{key:"nd089",newMajorVersion:11,supportUrl:"https://support.udacity.com/hc/en-us/articles/29261845717261-Difference-between-older-major-versions-1-10-and-the-new-major-version-11-of-AI-Programming-with-Python-Nanodegree-Program"}],Mt=(0,h.F4)(zt()),_t="".concat(Mt," .3s ease"),Pt=function(e){var n,t,r,h,k=e.children,w=(0,u.$)().t,S=(0,fe.z)().track,R=(0,c.useRouter)(),Z=(0,An.X)(),z=(0,d.useSelector)(Kn),T=(0,p.S)({base:void 0,lg:"40%",xl:z?"40%":"50%"},{ssr:!1}),L=(0,p.S)({base:void 0,sm:"240px",md:"320px",xl:"360px"},{ssr:!1}),M=(0,i.Z)((0,x.a)(["(max-width: 993px)"],{ssr:!1}),1)[0],_=(0,a.useState)(M?"100%":"30rem"),P=_[0],O=_[1],B=(0,a.useState)(!1),A=B[0],H=B[1],q=null===window||void 0===window||null===(n=window.location)||void 0===n||null===(t=n.href)||void 0===t?void 0:t.includes("/lab"),F=(0,Dn._)().hasAiIntegration,W=(0,ke.hb)(),K=W.isOpen,N=W.isHighlighted,$=W.onOpen,V=(0,Bn.C)(),Q=null===V||void 0===V||null===(r=V.attributes)||void 0===r?void 0:r.is_scholarship,X=null===V||void 0===V||null===(h=V.attributes)||void 0===h?void 0:h.is_enterprise,G=(0,a.useState)(!1),J=G[0],U=G[1],Y=(0,a.useState)(),ee=Y[0],ne=Y[1],te=(0,f.q)(),oe=te.isOpen,ie=te.onOpen,re=te.onClose,le=(0,a.useCallback)((function(e){U((function(n){return void 0!==e&&!n})),ne((function(n){return n===e?void 0:e}))}),[]);(0,a.useEffect)((function(){O(M?"100%":"30rem")}),[M]);var se=(0,a.useMemo)((function(){return Lt.filter((function(e){var n,t=null===(n=null===V||void 0===V?void 0:V.program.version)||void 0===n?void 0:n.split(".")[0];return!!t&&parseInt(t)<e.newMajorVersion})).find((function(e){var n;return e.key===(null===V||void 0===V||null===(n=V.program)||void 0===n?void 0:n.key)}))}),[V]),ae=function(){var e=(0,o.Z)((function(){return(0,l.__generator)(this,(function(e){return S("Updated dialog opened"),ie(),[2]}))}));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return se?(S("Program Updated",{eventProperty:{programKey:se.key}}),[4,Fn(se.key)]):[2];case 1:return e.sent(),R.push("/"),[2]}}))}));return function(){return e.apply(this,arguments)}}();(0,a.useEffect)((function(){var e=localStorage.getItem(E.rg);null!==e||M||localStorage.setItem(E.rg,"true"),"true"===e&&$()}),[$,M]);var ue=(0,a.useCallback)((function(e){O(e)}),[]),de=(0,a.useCallback)((function(){H(!0)}),[]),he=(0,a.useCallback)((function(){H(!1)}),[]);return Z.isLoading?null:(0,s.jsxs)(C.M.Provider,{value:{isExpanded:J,expandedAtom:ee,toggleExpandedAtom:le},children:[(0,s.jsxs)(v.k,{minH:"full",position:"relative",children:[(0,s.jsxs)(D,{xPosition:"start",isOpen:z,width:Tt,children:[(0,s.jsx)(Et,{}),(0,s.jsx)(It,{})]}),(0,s.jsxs)(v.k,{"data-expandall":K&&z?"true":void 0,as:"main",direction:"column",mt:0,flex:1,ps:z?{base:0,md:Tt}:0,pe:F&&K&&!q?{base:0,md:"calc(".concat(P," - 1rem)")}:0,transition:A?"none":"padding 0.2s ease-in",transitionDuration:"normal",sx:{"&[data-expandall='true'] > *:only-child":{md:{paddingStart:"0px",paddingEnd:"0px"}}},children:[se&&!Q&&!X&&(0,s.jsxs)(I,{cookieName:"update_version_nd003",children:[(0,s.jsxs)(m.x,{fontWeight:"bold",textAlign:"center",children:[w("lesson.newVersionAvailable")," "]}),(0,s.jsx)(g.z,{variant:"outline",colorScheme:"white",size:"sm",onClick:ae,children:w("lesson.updateToNewVersion")})]}),k]}),!q&&F&&(0,s.jsx)(On,{isOpen:K,width:P,animation:N?_t:void 0,onPanelResize:ue,isResizable:!M,maxWidth:T,minWidth:L,onResizeStart:de,onResizeEnd:he})]}),(0,s.jsx)(y.a,{isOpen:oe,onClose:re,title:w("lesson.confirmUpdate"),actionButtonLabel:w("common.update"),onClickAction:function(){return ce()},children:(0,s.jsxs)(b.xu,{children:[(0,s.jsx)(m.x,{children:w("lesson.updateConfirm")}),(null===se||void 0===se?void 0:se.supportUrl)&&(0,s.jsx)(j.r,{isExternal:!0,href:se.supportUrl,children:w("lesson.updateReadMore")})]})})]})},Ot=Pt},20682:function(e,n,t){t.d(n,{C:function(){return r}});var o=t(63598),i=t(69549),r=function(){var e,n,t,r=(0,o.r)(),l=r.nanodegree,s=r.paidCourse,a=r.freeCourse;return(0,(0,i.B)().selectEnrollmentForKey)(null!==(t=null!==(n=null!==(e=null===l||void 0===l?void 0:l.key)&&void 0!==e?e:null===s||void 0===s?void 0:s.key)&&void 0!==n?n:null===a||void 0===a?void 0:a.key)&&void 0!==t?t:"")}},84818:function(e,n,t){function o(){return{variation:"variant_b",isLoading:!1}}t.d(n,{X:function(){return o}})},86190:function(e,n,t){t.d(n,{Z:function(){return u}});var o=t(67294),i=t(11163),r=t(26793),l=t(7886),s=t(1215),a=t(63598),c=t(51423);function u(){var e,n=(0,c.K)().queryString,t=(0,r.$)().t,u=(0,o.useState)(),d=u[0],h=u[1],p=(0,i.useRouter)(),x=(0,a.r)(),f=x.nanodegree,v=x.part,m=x.paidCourse,g=x.freeCourse,b=x.lesson,j=x.concept,y=x.lab,C=(0,o.useMemo)((function(){return f&&f.parts?f.parts:[]}),[f]),k=(0,o.useMemo)((function(){return v?v.lessons:m?m.lessons:g?g.lessons:[]}),[v,m,g]),w=(0,o.useCallback)((function(e,t){return f&&v?s.FO.nanodegree({nanodegree:f,part:v,lesson:e,lessonContent:t,queryString:n}):m?s.FO.paidCourse({paidCourse:m,lesson:e,lessonContent:t,queryString:n}):g?s.FO.freeCourse({freeCourse:g,lesson:e,lessonContent:t,queryString:n}):void 0}),[f,v,m,g,n]),S=(0,o.useMemo)((function(){return Math.max(C.findIndex((function(e){return e===v})),0)}),[C,v]),R=(0,o.useMemo)((function(){return Math.max(null!==(e=k.findIndex((function(e){return e===b})))&&void 0!==e?e:0,0)}),[k,b]),I=(0,o.useMemo)((function(){var e=b?(0,l.kz)(b):[],n=e.findIndex((function(e){return e===j})),t=e.findIndex((function(e){return e===y}));return Math.max(n,t,0)}),[b,j,y]),Z=(0,o.useCallback)((function(e,n){return w(null!==n&&void 0!==n?n:b,e)}),[w,b]),E=(0,o.useCallback)((function(e,n){var t=Z(e,n);t&&p.push(t)}),[Z,p]),z=(0,o.useMemo)((function(){var e=b?(0,l.kz)(b):[];return I>=e.length-1}),[b,I]),T=(0,o.useMemo)((function(){return f?S===C.length-1&&R===k.length-1&&z:R===k.length-1&&z}),[z,R,f,k.length,C.length,S]),L=(0,o.useMemo)((function(){var e=b?(0,l.kz)(b):[];if(!z){var n=e[I+1];return function(){return E(n)}}if(R<k.length-1){var t,o=k[R+1];h(null!==(t=o.title)&&void 0!==t?t:void 0);var i=(0,l.kz)(o)[0];return function(){E(i,o)}}if(S<C.length-1){var r,a,c=C[S+1],u=c.lessons[0];h(null!==(a=null===u||void 0===u?void 0:u.title)&&void 0!==a?a:"");var d=null===u||void 0===u||null===(r=u.concepts)||void 0===r?void 0:r[0],x="";if(f&&(x=s.FO.nanodegree({nanodegree:f,part:c,lesson:u,lessonContent:d})),x&&!c.isExtraCurricular)return function(){p.push(x)}}h(void 0);var j=f?f.key:(null===v||void 0===v?void 0:v.key)?null===v||void 0===v?void 0:v.key:(null===m||void 0===m?void 0:m.key)?null===m||void 0===m?void 0:m.key:null===g||void 0===g?void 0:g.key;return function(){window.location.href="".concat("https://udacity.com","/enrollment/").concat(j)}}),[b,z,R,k,S,C,f,null===v||void 0===v?void 0:v.key,null===m||void 0===m?void 0:m.key,null===g||void 0===g?void 0:g.key,I,E,p]),M=(0,o.useMemo)((function(){var e=b?(0,l.kz)(b):[];if(I>0){var n=e[I-1];return function(){return E(n)}}if(R>0){var t=k[R-1],o=(0,l.kz)(t),i=o[o.length-1];return function(){E(i,t)}}var r=w();return r?function(){p.push(r)}:void 0}),[w,E,p,I,R,k,b]),_=(0,o.useMemo)((function(){var e=[];return e.push({name:t("home.myPrograms"),path:"/",current:!1}),f&&f.title&&e.push({name:f.title,path:s.FO.nanodegree({nanodegree:f,queryString:n}),current:!1}),f&&v&&v.title&&e.push({name:v.title,path:s.FO.nanodegree({nanodegree:f,part:v,queryString:n}),current:!1}),m&&m.title&&e.push({name:m.title,path:s.FO.paidCourse({paidCourse:m,queryString:n}),current:!1}),g&&g.title&&e.push({name:g.title,path:s.FO.freeCourse({freeCourse:g,queryString:n}),current:!1}),f&&v&&b&&b.title&&e.push({name:b.title,path:s.FO.nanodegree({nanodegree:f,part:v,lesson:b,queryString:n}),current:!1}),m&&b&&b.title&&e.push({name:b.title,path:s.FO.paidCourse({paidCourse:m,lesson:b,queryString:n}),current:!1}),g&&b&&b.title&&e.push({name:b.title,path:s.FO.freeCourse({freeCourse:g,lesson:b,queryString:n}),current:!1}),j&&j.title&&e.push({name:j.title,current:!0}),e}),[t,f,v,m,g,b,j,n]);return{getContentPath:Z,goTo:{content:E,next:L,previous:M},isLastContent:z,isEndOfProgram:T,nextLessonTitle:d,breadcrumbs:_}}}}]);